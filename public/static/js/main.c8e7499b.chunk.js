(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{701:function(e,t,a){},702:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(22),n=a.n(s),r=a(6),o=a(10),i=a(307),l=a.n(i),d=a(8),u=a.n(d),j=a(13),b=a(308),m=a.n(b),h="https://mern-calendar-vict.herokuapp.com/api",O=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(h,"/").concat(e);return"GET"===a?fetch(c):fetch(c,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},f=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(h,"/").concat(e),s=localStorage.getItem("token")||"";return"GET"===a?fetch(c,{method:a,headers:{"x-token":s}}):fetch(c,{method:a,headers:{"Content-type":"application/json","x-token":s},body:JSON.stringify(t)})},p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",c="".concat(h,"/").concat(e),s=localStorage.getItem("token")||"";return m()({method:a,url:c,headers:{"x-token":s},data:t})},x="[ui] Open Modal",v="[ui] Close Modal",y="[post] Set active",g="[post] Add new",N="[post] Clear active post",_="[post] Post updated",C="[post] Post deleted",k="[post] post loaded",w="[auth] Finish checking login state",S="[auth] Login",E="[auth] Logout",M="[reaccion] reaaciones loaded",D="[users] Set active",P="[users] Add new",A="[user] Clear active Users",T="[users] Users updated",R="[users] Users deleted",Y="[users] Users loaded",F="[tareas] tareas loaded",I="[tareas] tareas new loaded",L="[tareas] tareas Update",U="[tareas] tareas actualizar",J="[tareas] tareas delete",q="[tareas] tareas image loaded",z="[tareas] tareas add new",H="[tareas] tarea image delete",G="[tareas] create comment",V="[tareas] loads comment",B="[notificacion] tareas loaded",W="[events] Set active",K="[events] Add new",X="[events] Clear active Events",Z="[events] Events updated",$="[events] Events deleted",Q="[events] Events loaded",ee="[infoChat] open info chat",te="[infoChat] closed info chat",ae="[birthday] loaded birthday of day",ce="[birthday] create message birthday of day",se="[birthday] loeaded message birthday of day",ne="[chat] add new chat",re="[chat] loaded chat",oe="[chat] active chat room",ie="[chat] send message",le="[chat] loaded messages",de="[chat] loaded members chat",ue="[chat] loaded conection user",je="[chat] img chat is loaded",be="[chat] video chat is loaded",me="[chat] members no socket chat is loaded",he="[chat] members no chat loaded",Oe="[dashboard] Users count",fe="[dashboard] Users online",pe="[dashboard] Users offline",xe="[dashboard] Post Count",ve="[dashboard] Events Count",ye="[dashboard] Connections Count",ge=a(14),Ne=a.n(ge),_e=function(e){return{type:g,payload:e}},Ce=function(e){return{type:y,payload:e}},ke=function(e){return{type:_,payload:e}},we=function(){return{type:C}},Se=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("posts");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),s=c.publicaciones,console.log(c.publicaciones),t(Ee(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},Ee=function(e){return{type:k,payload:e}},Me=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("posts/notificacion/");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),s=c.notificacion,console.log(c.notificacion),t(De(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},De=function(e){return{type:B,payload:e}},Pe=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("chat");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.chat,t(Ae(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Ae=function(e){return{type:re,payload:e}},Te=function(e){return{type:oe,payload:e}},Re=function(e){return{type:le,payload:e.reverse()}},Ye=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("chat/miembros/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,n=s.miembros,a(Fe(n)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Fe=function(e){return{type:me,payload:e}},Ie=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("conexion/user/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,n=s.conexion,a(Le(n)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Le=function(e){return{type:ue,payload:e}},Ue=function(e){return{type:je,payload:e}},Je=function(e){return{type:be,payload:e}},qe=(a(194),a(0)),ze=Object(c.createContext)(),He=function(e){var t=e.children,a=Object(r.b)(),s=function(e){var t=Object(c.useState)(null),a=Object(o.a)(t,2),s=a[0],n=a[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),d=i[0],u=i[1],j=Object(c.useCallback)((function(){var t=localStorage.getItem("token"),a=l.a.connect(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}});n(a)}),[e]),b=Object(c.useCallback)((function(){null===s||void 0===s||s.disconnect()}),[s]);return Object(c.useEffect)((function(){u(null===s||void 0===s?void 0:s.connected)}),[s]),Object(c.useEffect)((function(){null===s||void 0===s||s.on("connect",(function(){return u(!0)}))}),[s]),Object(c.useEffect)((function(){null===s||void 0===s||s.on("disconnect",(function(){return u(!1)}))}),[s]),{socket:s,online:d,conectarSocket:j,desconectarSocket:b}}("http://localhost:4000"),n=s.socket,i=s.online,d=s.conectarSocket,u=s.desconectarSocket,j=Object(r.c)((function(e){return e.auth})).logged,b=(Object(r.c)((function(e){return e.chat})).conexion,Object(r.c)((function(e){return e.auth})).uid);return Object(c.useEffect)((function(){j&&(d(),console.log("existe uid"))}),[j,d]),Object(c.useEffect)((function(){j||(u(),console.log("no existe uid"))}),[j,u]),Object(c.useEffect)((function(){null===n||void 0===n||n.on("lista-usuarios-activo",(function(e){console.log(e),a({type:de,payload:e})}))}),[n,a]),Object(c.useEffect)((function(){null===n||void 0===n||n.on("lista-cambios-usuarios",(function(e){console.log("algo cambio"),n.emit("lista-usuarios",{uid:b})}))}),[n,a]),Object(c.useEffect)((function(){null===n||void 0===n||n.on("create-sala-chat",(function(e){console.log(e),a({type:ne,payload:e}),a(Pe()),a(Te(e)),a(Ye(e.id))}))}),[n]),Object(c.useEffect)((function(){null===n||void 0===n||n.on("reading-last-messge",(function(e){a(Pe())}))}),[n]),Object(c.useEffect)((function(){null===n||void 0===n||n.on("send-message",(function(e){console.log(e),a(function(e){return{type:ie,payload:e}}(e)),a(Pe())}))}),[n]),Object(qe.jsx)(ze.Provider,{value:{socket:n,online:i},children:t})},Ge=a(26),Ve=a(30),Be=function(){return{type:w}},We=function(e){return{type:S,payload:e}},Ke=function(){return{type:E}},Xe=a(17),Ze=a(3),$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),a=Object(o.a)(t,2),s=a[0],n=a[1],r=function(){n(e)},i=function(e){var t=e.target;n(Object(Ze.a)(Object(Ze.a)({},s),{},Object(Xe.a)({},t.name,t.value)))};return[s,i,r]},Qe=function(){var e=Object(r.b)(),t=$e({lEmail:""}),a=Object(o.a)(t,2),c=a[0],s=a[1],n=c.lEmail;return Object(qe.jsx)("div",{className:"getPassword1",children:Object(qe.jsx)("div",{className:"caja1",children:Object(qe.jsxs)("form",{className:"formulario1",onSubmit:function(t){var a;t.preventDefault(),console.log(),e((a=n,function(){var e=Object(j.a)(u.a.mark((function e(t,c){var s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("correo",{email:a},"POST");case 3:return s=e.sent,e.next=6,s.json();case 6:(n=e.sent).ok?n.ok&&Ne.a.fire("se envio correo para su recuperacion","","success"):(Ne.a.fire("no existe correo","","error"),console.log(n),console.log(n.ok)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(qe.jsx)("h3",{className:"titulo1",children:"Recuperar clave"}),Object(qe.jsx)("h3",{className:"indicacion1",children:"Ingresa tu correo y te enviaremos las instrucciones para cambiar tu contrase\xf1a"}),Object(qe.jsxs)("div",{children:[Object(qe.jsx)("i",{class:"fas fa-user"}),Object(qe.jsxs)("span",{children:[" ",Object(qe.jsx)("input",{className:"texto1",type:"email",placeholder:"Email",name:"lEmail",onChange:s})]})]}),Object(qe.jsx)("button",{className:"boton1",type:"submit",children:"Recuperar Clave"})]})})})},et=a(725),tt=function(){return Object(qe.jsx)("div",{className:"getPassword2",children:Object(qe.jsx)("div",{className:"caja3",children:Object(qe.jsxs)("form",{className:"formulario2",children:[Object(qe.jsx)("h3",{className:"titulo2",children:"Recuperar clave"}),Object(qe.jsxs)("div",{children:[Object(qe.jsx)("i",{class:"fas fa-key"}),Object(qe.jsxs)("span",{children:[" ",Object(qe.jsx)("input",{className:"texto",type:"text",placeholder:"Ingrese la clave nueva",name:"lEmail"})]})]}),Object(qe.jsxs)("div",{children:[Object(qe.jsx)("i",{class:"fas fa-key"}),Object(qe.jsxs)("span",{children:[" ",Object(qe.jsx)("input",{className:"texto",type:"text",placeholder:"Ingrese la clave nueva otra vez",name:"lEmail"})]})]}),Object(qe.jsx)(et.a,{className:"boton2",variant:"contained",color:"primary",href:"GetPassword2",children:"Guardar"})]})})})},at=function(){var e=Object(r.b)(),t=$e({lEmail:"",lPassword:""}),a=Object(o.a)(t,2),c=a[0],s=a[1],n=c.lEmail,i=c.lPassword;return Object(qe.jsx)("div",{className:"login",children:Object(qe.jsx)("div",{className:"caja",children:Object(qe.jsxs)("form",{className:"formulario",onSubmit:function(t){var a,c;t.preventDefault(),e((a=n,c=i,function(){var e=Object(j.a)(u.a.mark((function e(t,s){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth",{email:a,password:c},"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,console.log(r),r.ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(We({uid:r.uid,name:r.name,email:r.email,segundoNombre:r.segundoNombre,apellidoPaterno:r.apellidoPaterno,area:r.area,fono:r.fono,nacimiento:r.nacimiento,ingreso:r.ingreso,rol:r.rol,cargo:r.cargo,empresa:r.empresa,permisos:r.permisos}))):Ne.a.fire("email o contrase\xf1a incorrecta","","error");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(qe.jsx)("h3",{className:"titulo",children:"Reilak"}),Object(qe.jsx)("div",{children:Object(qe.jsxs)("span",{children:[Object(qe.jsx)("i",{class:"fas fa-user"}),Object(qe.jsx)("input",{className:"texto",type:"text",placeholder:"Email",name:"lEmail",value:n,onChange:s})]})}),Object(qe.jsx)("div",{children:Object(qe.jsxs)("span",{children:[Object(qe.jsx)("i",{class:"fas fa-lock"}),Object(qe.jsx)("input",{className:"texto",type:"password",placeholder:"Password",name:"lPassword",value:i,onChange:s})]})}),Object(qe.jsx)("button",{className:"boton",type:"submit",children:"Iniciar sesion"}),Object(qe.jsx)("div",{className:"foterlogin",children:Object(qe.jsxs)("h1",{className:"recuperarClave",children:[Object(qe.jsxs)("a",{href:"getPassword",className:"link",children:[" ","\xbfNo tienes tu clave?"," "]})," "]})})]})})})},ct=function(){return Object(qe.jsx)("div",{className:"auth__main",children:Object(qe.jsx)("div",{className:"auth__box-containter",children:Object(qe.jsxs)(Ve.d,{children:[Object(qe.jsx)(Ve.b,{path:"/login",component:at}),Object(qe.jsx)(Ve.a,{to:"/login"})]})})})},st=a(313),nt=(a(487),a(19)),rt=a.n(nt),ot=a(28),it=function(){return{type:x}},lt=function(){return{type:v}},dt=function(){return{type:te}},ut=a(326),jt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};rt.a.setAppElement("#root");var bt,mt={titulo:"",contenido:"",multimedia:""},ht={nameFile:""},Ot=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(null),i=Object(o.a)(n,2),l=i[0],d=i[1],b=Object(r.b)(),m=Object(r.c)((function(e){return e.ui})).modalOpen,h=Object(r.c)((function(e){return e.post})).activePost,O=Object(c.useState)(!0),f=Object(o.a)(O,2),x=f[0],v=f[1],y=Object(c.useState)(mt),g=Object(o.a)(y,2),_=g[0],C=g[1];Object(c.useEffect)((function(){s((function(){return ot.EditorState.createWithContent(ot.ContentState.createFromBlockArray(Object(ot.convertFromHTML)(mt.contenido)))}))}),[mt.contenido]);var k=function(){var e=Object(ut.a)(a.getCurrentContent());d(e),_.contenido=l};Object(c.useEffect)((function(){null!=a&&k()}),[l]);var w=Object(c.useState)(""),S=Object(o.a)(w,2),E=S[0],M=S[1];Object(c.useEffect)((function(){E&&(console.log(E.name),_.multimedia=E,console.log(E))}),[E]),ht.nameFile=E.name;var D=_.titulo;_.contenido;console.log(h),Object(c.useEffect)((function(){h?(C(h),mt.contenido=h.contenido):(C(mt),mt.contenido="")}),[h,C]);var P=function(){b(lt()),C(mt),M(""),s(ot.EditorState.createEmpty())};return Object(qe.jsxs)(rt.a,{isOpen:m,onRequestClose:P,style:jt,closeTimeoutMS:200,className:"modal modal-publicacion",overlayClassName:"modal-fondo",children:[Object(qe.jsxs)("h1",{children:[" ",h?"Editar publicacion":"Crear publicacion"," "]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault();var t,a=new FormData;if(a.set("titulo",_.titulo),a.set("contenido",_.contenido),a.set("multimedia",_.multimedia),D.trim().length<2)return v(!1);h?(a.set("id",h.id),b((t=a,function(){var e=Object(j.a)(u.a.mark((function e(a){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Ne.a.fire("Espere mientras carga"),Ne.a.showLoading(),e.next=5,p("posts/".concat(t.id),t,"PUT");case 5:return c=e.sent,e.next=8,JSON.stringify(c.data.publicacion);case 8:s=e.sent,console.log(JSON.parse(s)),s&&(console.log("ok"),Ne.a.fire("Publicacion editada","","success"),a(ke(JSON.parse(s))),a({type:N})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()))):b(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a,c){var s,n,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c().auth,n=s.uid,r=s.name,t.prev=1,Ne.a.fire("Espere mientras carga"),Ne.a.showLoading(),t.next=6,p("posts",e,"POST");case 6:return o=t.sent,t.next=9,JSON.stringify(o.data.publicacion);case 9:(i=t.sent)?(e.id=i.id,e.user={_id:n,name:r},a(_e(JSON.parse(i))),Ne.a.fire("Publicacion creada","","success")):Ne.a.fire("Hubo un error contacte con el administrador","","error"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,a){return t.apply(this,arguments)}}()}(a)),v(!0),P()},children:[Object(qe.jsxs)("div",{className:"form-group",children:[Object(qe.jsx)("label",{children:"Titulo"}),Object(qe.jsx)("input",{type:"text",className:"form-control form-modal ".concat(!x&&"is-invalid"),placeholder:"T\xedtulo del evento",name:"titulo",autoComplete:"off",value:D,onChange:function(e){var t=e.target;C(Object(Ze.a)(Object(Ze.a)({},_),{},Object(Xe.a)({},t.name,t.value)))}})]}),Object(qe.jsx)("div",{className:"form-group",children:Object(qe.jsx)(st.Editor,{editorState:a,onEditorStateChange:function(e){s(e),k()},createFromText:"hola",wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class",localization:{locale:"es"},toolbar:{options:["inline","list","textAlign","emoji","history"],inline:{inDropdown:!1,dropdownClassName:void 0,options:["bold","italic","underline"]},fontSize:{options:["8",9,10,11,12,14,16,18,24,"30",36,48,60,72,96],className:"fontSize__textRich",component:void 0,dropdownClassName:void 0},fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],className:"fontFamily__textRich",component:void 0,dropdownClassName:void 0},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],linkCallback:void 0}}})}),Object(qe.jsxs)("div",{className:"modal-footer border-0 footer__crear-publicacion",children:[Object(qe.jsxs)("div",{className:"subir__multimedia",children:[Object(qe.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){e.target.files&&(M(e.target.files[0]),console.log(e.target.files[0]))},accept:".img,.png,.mp4,.jpg,.jepg,.gif"}),Object(qe.jsx)("div",{className:"label-holder",children:Object(qe.jsx)("label",{htmlFor:"file",className:"label",children:Object(qe.jsx)("i",{className:"fas fa-photo-video fa-lg"})})})]}),Object(qe.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(qe.jsx)("i",{className:"far fa-save"}),Object(qe.jsx)("span",{children:" Guardar"})]}),ht.nameFile&&Object(qe.jsxs)("div",{className:"result",children:[Object(qe.jsxs)("p",{children:["Multimedia: ",ht.nameFile]}),Object(qe.jsx)("button",{onClick:function(){M("")},className:"btn btn-danger",children:"X"})]})]})]})]})},ft=a(80),pt=a.n(ft),xt=a(7),vt=a.n(xt),yt=function(e){return{type:ae,payload:e}},gt=function(e){return{type:se,payload:e}},Nt=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(r.b)();Object(c.useEffect)((function(){n(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("birthday/message");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),s=c.messageBirthday,console.log(c.messageBirthday),t(gt(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())}),[n]);var i=Object(r.c)((function(e){return e.birthday})).message;console.log(i);var l=i.map((function(e){return vt()(e.fecha).format("DD-MM-YYYY")}));return console.log(l),console.log(vt()(new Date).format("DD-MM-YYYY")),Object(qe.jsx)("div",{className:"mybirthday",children:l.includes(vt()(new Date).format("DD-MM-YYYY"))&&Object(qe.jsxs)("div",{children:[Object(qe.jsxs)("div",{className:"mybirthday__heard",onClick:function(){return s(!a)},children:[Object(qe.jsx)("img",{src:"https://static.xx.fbcdn.net/rsrc.php/v3/yA/r/hq-o6A7TPpe.png?_nc_eui2=AeGGU6A8aXOypIv04S6g_xh1IDgIyy_WVG8gOAjLL9ZUb6p6DkCMUcdiSXRkwm5okpLKOc7SM8byc76OqjwogCUI",alt:"Imagen regalo"}),Object(qe.jsxs)("span",{children:["Los siguientes miembros te dedicaron un mensaje por tu cumplea\xf1os"," ",a?Object(qe.jsx)("i",{className:"fas fa-chevron-down"}):Object(qe.jsx)("i",{className:"fas fa-chevron-right"})]})]}),a&&Object(qe.jsx)("div",{className:"mybirthday__body",children:i.map((function(e,t){var a=e.message,c=e.userFelicitador,s=e.fecha;return Object(qe.jsxs)("div",{className:"mybirthday__body-item",children:[Object(qe.jsxs)("div",{className:"mybirthday__body-item-top",children:[Object(qe.jsx)("div",{className:"mybirthday__body-item-top-left",children:Object(qe.jsx)("img",{src:c.imgusuario,alt:"Foto perfil"})}),Object(qe.jsxs)("div",{className:"mybirthday__body-item-top-right",children:[Object(qe.jsxs)("div",{className:"mybirthday__body-item-top-right-name",children:[c.name," ",c.segundoNombre," ",c.apellidoPaterno," ",c.apellidoMaterno]}),Object(qe.jsx)("div",{className:"mybirthday__body-item-top-right-time",children:vt()(s).format("DD-MM-YYYY, h:mm a")})]})]}),Object(qe.jsx)("div",{className:"mybirthday__body-item-bottom",children:a})]})}))})]})})},_t=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(r.c)((function(e){return e.auth})).uid,i=Object(r.c)((function(e){return e.post})).posts,l=Object(r.b)();Object(c.useEffect)((function(){l(Se())}),[l]);var d=function(e){console.log(e),l(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("posts/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),s.ok&&(console.log("ok"),Ne.a.fire("Publicacion eliminada","","success"),a(we()),a(Se())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},b=function(e){l(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("posts/reaccion/".concat(e.id),e,"PUT");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.publicacion);case 6:s=t.sent,console.log(s),s&&(console.log("ok"),a(Se())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}({post:e}))};return Object(qe.jsxs)("div",{className:"lista__publicaciones",children:[Object(qe.jsx)(Nt,{}),i.length>0?i.map((function(e,t){return Object(qe.jsxs)("div",{className:"card__publicaciones",children:[Object(qe.jsxs)("div",{className:"publicaciones__heard",children:[Object(qe.jsxs)("div",{className:"publicaciones__heard-top",children:[Object(qe.jsx)("div",{className:"publicaciones__heard-top-titulo",children:e.titulo}),e.usuario===n&&Object(qe.jsxs)("div",{className:"publicaciones__heard-top-option",children:[Object(qe.jsx)("div",{className:"publicaciones__heard-top-option-btn",onClick:function(){!function(e){console.log(e),a&&e.id===a.id?s(null):s(e)}(e)},children:Object(qe.jsx)("i",{className:"fas fa-ellipsis-h fa-lg",children:" "})}),a&&a.id===e.id&&Object(qe.jsxs)("div",{className:"publicaciones__heard-top-option-content","data-id":t,children:[Object(qe.jsx)("li",{className:"publicaciones__heard-top-option-content-list",onClick:function(){d(e.id)},children:Object(qe.jsxs)("i",{className:"fas fa-trash",children:[" ",Object(qe.jsx)("span",{children:"Eliminar"})]})}),Object(qe.jsx)("li",{className:"publicaciones__heard-top-option-content-list",onClick:function(){!function(e){l(Ce(e)),l(it()),s(null)}(e)},children:Object(qe.jsxs)("i",{className:"fas fa-pen",children:[" ",Object(qe.jsx)("span",{children:"Editar"})]})})]})]})]}),Object(qe.jsx)("div",{className:"publicaciones__heard-bottom",children:Object(qe.jsx)("span",{className:"publicaciones__heard-bottom-fecha",children:vt()(e.fecha).format("DD-MM-YYYY, h:mm a")})})]}),Object(qe.jsx)("div",{className:"publicaciones__texto",children:Object(qe.jsx)("div",{dangerouslySetInnerHTML:{__html:e.contenido}})}),Object(qe.jsx)("div",{className:"publicaciones__multimedia",children:e.multimedia?"mp4"===e.multimedia.substr(-3)?Object(qe.jsx)("div",{className:"publicaciones__multimedia",children:Object(qe.jsx)(pt.a,{url:e.multimedia,width:"100%",height:"100%",controls:!0,volume:"0.8"})}):Object(qe.jsx)("img",{src:e.multimedia,width:"100%",height:"100%"}):""}),Object(qe.jsxs)("div",{className:"publicaciones__footer",children:[Object(qe.jsx)("div",{className:"publicaciones__reaccion",onClick:function(){b(e.id)},children:e.reaccion&&e.reaccion.includes(n)?Object(qe.jsx)("i",{className:"fas fa-heart"}):Object(qe.jsx)("i",{className:"far fa-heart"})}),Object(qe.jsxs)("div",{children:[" ",e.reaccion?e.reaccion.length:0]})]})]},e.id)})):Object(qe.jsx)("div",{className:"no-publicaciones",children:"No existen publicaciones"})]})},Ct=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})).rol;return Object(qe.jsxs)("div",{className:"publicaciones",children:["Administrador"===t&&Object(qe.jsx)("button",{className:"btn__publicar",onClick:function(){e(it())},children:Object(qe.jsxs)("span",{children:[Object(qe.jsx)("i",{className:"fas fa-plus"})," Crear publicacion"]})}),Object(qe.jsx)(Ot,{}),Object(qe.jsx)(_t,{})]})},kt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"#242526"},overlay:{transition:"opacity .2s ease-in-out",backgroundColor:"rgba(53, 5, 5, 0.3)"}},wt={message:"",felicitado:""},St=function(){var e=Object(r.b)(),t=Object(c.useState)(wt),a=Object(o.a)(t,2),s=a[0],n=a[1];Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("birthday");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),s=c.users,console.log(c.users),t(yt(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var i=Object(r.c)((function(e){return e.birthday})).birthday;console.log(i);var l=Object(c.useState)(!1),d=Object(o.a)(l,2),b=d[0],m=d[1],h=function(e){e.preventDefault(),m(!1)};return Object(qe.jsxs)("div",{className:"cumplea\xf1os",children:[Object(qe.jsxs)("div",{className:"cumplea\xf1os__header",children:[Object(qe.jsx)("img",{src:"https://static.xx.fbcdn.net/rsrc.php/v3/yA/r/hq-o6A7TPpe.png?_nc_eui2=AeGGU6A8aXOypIv04S6g_xh1IDgIyy_WVG8gOAjLL9ZUb6p6DkCMUcdiSXRkwm5okpLKOc7SM8byc76OqjwogCUI"}),Object(qe.jsx)("div",{children:" cumplea\xf1os del dia"})]}),Object(qe.jsx)("div",{className:"cumplea\xf1os__body",children:0!=i?i.map((function(e,t){var a=e.name,c=e.segundoNombre,n=e.apellidoPaterno,r=e.apellidoMaterno,o=e.imgusuario,i=e.id;return Object(qe.jsxs)("div",{className:"cumplea\xf1os__body-item",children:[Object(qe.jsxs)("div",{className:"cumplea\xf1os__body-item-top",children:[Object(qe.jsx)("img",{src:o}),Object(qe.jsxs)("div",{children:[a," ",c," ",Object(qe.jsx)("br",{}),n," ",r]})]}),Object(qe.jsx)("div",{className:"cumplea\xf1os__body-item-bottom",children:Object(qe.jsx)("button",{className:"btn__felicitar",onClick:function(){!function(e){m(!0),s.felicitado=e}(i)},children:"Dedicar un mensaje"})})]})})):Object(qe.jsx)("div",{className:"nobirthdays",children:"Hoy no hay cumplea\xf1os"})}),Object(qe.jsx)(rt.a,{isOpen:b,onRequestClose:h,style:kt,closeTimeoutMS:1,children:Object(qe.jsxs)("form",{className:"birthday__modal",onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a,c){var s,n,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c().auth,n=s.uid,r=s.name,t.prev=1,t.next=4,p("birthday",e,"POST");case 4:return o=t.sent,t.next=7,JSON.stringify(o.data.birthday);case 7:(i=t.sent)?(e.id=i.id,e.user={_id:n,name:r},Ne.a.fire("Se  envio un mensaje","","success")):Ne.a.fire("Hubo un error contacte con el administrador","","error"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(s)),m(!1)},children:[Object(qe.jsx)("div",{className:"birthday__modal-header",children:"Dedicale unas palabras en su dia"}),Object(qe.jsx)("div",{className:"birthday__modal-body",children:Object(qe.jsx)("input",{type:"text",placeholder:"Dedicale un mensaje",name:"message",autoComplete:"off",onChange:function(e){var t=e.target;n(Object(Ze.a)(Object(Ze.a)({},s),{},Object(Xe.a)({},t.name,t.value)))}})}),Object(qe.jsxs)("div",{className:"birthday__modal-footer",children:[Object(qe.jsx)("button",{type:"submit",className:"birthday__modal-btn",children:"Enviar"}),Object(qe.jsx)("button",{className:"birthday__modal-btn",onClick:h,children:"Cancelar"})]})]})})]})},Et=function(e){return{type:P,payload:e}},Mt=function(e){return{type:W,payload:e}},Dt=function(){return{type:X}},Pt=function(e){return{type:Z,payload:e}},At=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("event/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),s.ok&&(console.log("ok"),Ne.a.fire("Evento eliminado","","success"),a(Tt()),a(Ft())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Tt=function(){return{type:$}},Rt=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("event");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.eventos,t(Ft(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Yt=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("event/eventoscercanos/");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.eventos,t(Ft(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Ft=function(e){return{type:Q,payload:e}},It={tipoEvento:"Proximos Eventos",tipoActual:"Evento"},Lt=function(){var e=(new Date).getTime(),t=Object(r.b)(),a=Object(r.c)((function(e){return e.events})).events,s=Object(r.c)((function(e){return e.auth})).uid,n=Object(c.useState)(It),i=Object(o.a)(n,2),l=i[0],d=i[1];Object(c.useEffect)((function(){d(It)}),[d]),Object(c.useEffect)((function(){t(Yt())}),[t]);var u=l.tipoEvento,j=l.tipoActual,b=(vt()(e).format("MMMM"),vt()(e).format("DD"),vt()(e).format("dddd"),function(e,t){var a=t.toString().search(s);return"Evento"==e||"Reunion"==e&&a>=0?"block":"Reunion"==e&&a<0?"none":"block"}),m=function(e){console.log("tipoEve: "+e),"Proximos Eventos"==e?(d(Object(Ze.a)(Object(Ze.a)({},l),{},{tipoEvento:e,tipoActual:"Evento"})),t(Yt())):"Proximas Reuniones"==e&&(d(Object(Ze.a)(Object(Ze.a)({},l),{},{tipoEvento:e,tipoActual:"Reunion"})),console.log(j),t(Yt()))};return Object(qe.jsxs)("div",{className:"container-evecercanos-ysm",children:[Object(qe.jsx)("div",{className:"header-evecercanos-ysm",children:u}),Object(qe.jsxs)("div",{className:"body-evecercanos-ysm",children:[Object(qe.jsxs)("div",{className:"tipo-evecercanos-ysm",children:[Object(qe.jsx)("div",{className:"evento-tipo-evecercanos-ysm",onClick:function(){m("Proximos Eventos")},children:"Evento"}),Object(qe.jsx)("div",{className:"reunion-tipo-evecercanos-ysm",onClick:function(){m("Proximas Reuniones")},children:"Reuni\xf3n"})]}),Object(qe.jsx)("div",{className:"eventos-container-evecercanos-ysm",children:a.map((function(e,t){var a=e.titulo,c=(e.id,e.descripcion,e.start),s=e.tipo,n=(e.end,e.reunion);return"block"==b(s,n)&&j==s||"block"==b(s,n)&&j==s?Object(qe.jsx)("div",{className:"evento-container-evecercanos-ysm",children:Object(qe.jsxs)("div",{className:"evento-evecercanos-ysm",children:[Object(qe.jsx)("div",{className:"calendario-evecercanos-ysm",children:Object(qe.jsxs)("time",{datetime:"2014-2-20",className:"icon",children:[Object(qe.jsx)("strong",{children:vt()(c).format("MMMM").toUpperCase()}),Object(qe.jsx)("span",{children:vt()(c).format("DD")})]})}),Object(qe.jsx)("div",{className:"descripcion-evecercanos-ysm",children:a})]})}):""}))})]})]})},Ut=function(){return Object(qe.jsx)("div",{className:"row barra_derecha",children:Object(qe.jsxs)("div",{className:"col",children:[Object(qe.jsx)("div",{className:"row",children:Object(qe.jsx)("div",{className:"col",children:Object(qe.jsx)(St,{})})}),Object(qe.jsx)("div",{className:"row espacio-evento",children:Object(qe.jsx)("div",{className:"col ",children:Object(qe.jsx)(Lt,{})})})]})})},Jt=function(){return Object(qe.jsxs)("div",{className:"main__home",children:[Object(qe.jsx)(Ct,{}),Object(qe.jsx)(Ut,{})]})},qt=function(e){return{type:P,payload:e}},zt=function(e){return{type:D,payload:e}},Ht=function(){return{type:A}},Gt=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,!1||(Ne.a.fire("Espere mientras carga"),Ne.a.showLoading()),t.next=5,p("user/".concat(e.id),e,"PUT");case 5:return c=t.sent,t.next=8,JSON.stringify(c.data.usuario);case 8:s=t.sent,console.log(s),s&&(!0,console.log("ok"),Ne.a.fire("Usuario editado","","success"),a(Vt(e)),a(Bt())),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},Vt=function(e){return{type:T,payload:e}},Bt=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("user");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.usuario,console.log(s),t(Wt(s)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},Wt=function(e){return{type:Y,payload:e}},Kt=function(e){return{type:Y,payload:e}},Xt={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};rt.a.setAppElement("#root");var Zt=vt()().minutes(0).seconds(0).add(1,"hours"),$t=(bt={id:"",name:"",email:"",segundoNombre:"",apellidoPaterno:"",apellidoMaterno:"",area:"",fono:"",nacimiento:"",rol:"",cargo:"",rut:"",imgusuario:"",ingreso:"",emailp:"",estado:""},Object(Xe.a)(bt,"nacimiento",Zt.toDate()),Object(Xe.a)(bt,"ingreso",Zt.toDate()),Object(Xe.a)(bt,"opcion",""),bt),Qt=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.ui})).modalOpen,a=Object(r.c)((function(e){return e.users})).activeUser,s=Object(c.useState)($t),n=Object(o.a)(s,2),i=n[0],l=n[1],d=(i.id,i.name,i.email),u=(i.segundoNombre,i.apellidoPaterno,i.apellidoMaterno,i.area),j=i.fono,b=i.nacimiento,m=i.rol,h=i.cargo,O=(i.rut,i.imgusuario,i.ingreso),f=i.emailp,p=i.estado,x=i.opcion,v=void 0===x?"Contacto":x;Object(c.useEffect)((function(){l(a||$t)}),[a,l]);var y=function(e){"Cargo"==e&&l(Object(Ze.a)(Object(Ze.a)({},i),{},{opcion:"Cargo"})),"Contacto"==e&&l(Object(Ze.a)(Object(Ze.a)({},i),{},{opcion:"Contacto"})),"Otros"==e&&l(Object(Ze.a)(Object(Ze.a)({},i),{},{opcion:"Otros"}))};return Object(qe.jsxs)(rt.a,{isOpen:t,onRequestClose:function(){e(lt()),e(Ht()),l($t)},style:Xt,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-resumenusuario-ysm",children:Object(qe.jsx)("div",{className:"titulo-resumenusuario-ysm",children:"Informacion Del Usuario"})}),Object(qe.jsxs)("div",{className:"subheader-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"img-subheader-resumenusuario-ysm"}),Object(qe.jsx)("div",{className:"info-subheader-resumenusuario-ysm"})]}),Object(qe.jsx)("div",{className:"body-resumenusuario-ysm",children:"Cargo"==v?Object(qe.jsxs)("div",{className:"para-opcion-ysm",children:[Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Rol"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:m})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"\xc1rea"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:u})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Cargo"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:h})]})})]}):"Contacto"==v?Object(qe.jsxs)("div",{className:"para-opcion-ysm",children:[Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Email Personal"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:f})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Email Coorporativo"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:d})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Fono"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:j})]})})]}):"Otros"==v?Object(qe.jsxs)("div",{className:"para-opcion-ysm",children:[Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Estado"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:p})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Ingreso"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:vt()(O).format("DD-MM-yy")})]})}),Object(qe.jsx)("div",{className:"apartado-resumenusuario-ysm",children:Object(qe.jsxs)("div",{className:"subapartado-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"header-subapartado-resumenusuario-ysm",children:"Nacimiento"}),Object(qe.jsx)("div",{className:"body-subapartado-resumenusuario-ysm",children:vt()(b).format("DD-MM-yy")})]})})]}):""}),Object(qe.jsxs)("div",{className:"footer-resumenusuario-ysm",children:[Object(qe.jsx)("div",{className:"personal-link-footer-ysm",onClick:function(){y("Cargo")},children:Object(qe.jsx)("i",{class:"fas fa-briefcase"})}),Object(qe.jsx)("div",{className:"contacto-link-footer-ysm",onClick:function(){y("Contacto")},children:Object(qe.jsx)("i",{class:"far fa-address-card"})}),Object(qe.jsx)("div",{className:"otros-link-footer-ysm",onClick:function(){y("Otros")},children:Object(qe.jsx)("i",{class:"far fa-plus-square"})})]})]})},ea={estado:"",buscar:""},ta=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(Bt())}),[e]);var t=Object(c.useState)(ea),a=Object(o.a)(t,2),s=a[0],n=a[1],i=(s.estado,s.buscar);Object(c.useEffect)((function(){n(ea)}),[n]);var l=Object(r.c)((function(e){return e.users})).users,d=Object(r.c)((function(e){return e.auth}));return Object(qe.jsxs)("div",{className:"container-fluid general-mu",children:[Object(qe.jsxs)("div",{className:"row cabezera-lu",children:[Object(qe.jsx)("div",{className:"col-1 espacioizq-cabezera-lu"}),Object(qe.jsx)("div",{className:"col btn-cabezera-lu",children:Object(qe.jsx)(Ge.b,{to:"/mantenedorusuario2",children:"Administrador"==d.rol?Object(qe.jsx)("button",{type:"button",class:"btn btn-primary btn-lu",children:"Crear usuario"}):""})}),Object(qe.jsx)("div",{className:"col espacioder-cabezera-lu"})]}),Object(qe.jsxs)("div",{className:"row tabla-lu ",children:[Object(qe.jsx)("div",{className:"col-1 izquierda-formulario-lu"}),Object(qe.jsxs)("div",{className:"col tabla-contenedor-lu card border border-secondary",children:[Object(qe.jsxs)("div",{className:"row filtros-contenedor-lu",children:[Object(qe.jsx)("div",{className:"col-1 espacio-filtros-lu"}),Object(qe.jsxs)("div",{className:"col-3 rol-filtros-lu",children:[Object(qe.jsx)("div",{className:"row ",children:Object(qe.jsxs)("div",{className:"col ",children:[Object(qe.jsx)("label",{for:"exampleFormControlSelect1",children:"Example select"}),Object(qe.jsxs)("select",{class:"form-control",onChange:function(t){var a,c=t.target;e((a=c.value,function(){var e=Object(j.a)(u.a.mark((function e(t){var c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("filtros/rol/".concat(a),a,"GET");case 3:return c=e.sent,console.log(c),e.next=7,c.json();case 7:s=e.sent,console.log(s),n=s.estadoBuscado,console.log(n),s.ok?t(Kt(n)):Ne.a.fire("Error",s.msg,"error"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))},name:"rol",id:"exampleFormControlSelect1",children:[Object(qe.jsx)("option",{defaultValue:!0,children:"Seleccione un rol..."}),Object(qe.jsx)("option",{value:"Colaborador",children:"Colaborador"}),Object(qe.jsx)("option",{value:"Jefatura",children:"Jefatura"}),Object(qe.jsx)("option",{value:"Administrador",children:"Administrador"})]})]})}),Object(qe.jsx)("div",{className:"row ",children:Object(qe.jsx)("div",{className:"col label-opaco",children:"Filtro por rol"})})]}),Object(qe.jsxs)("div",{className:"col-3 permiso-filtros-lu",children:[Object(qe.jsx)("div",{className:"row ",children:Object(qe.jsxs)("div",{className:"col ",children:[Object(qe.jsx)("label",{for:"exampleFormControlSelect2",children:"Example select"}),Object(qe.jsxs)("select",{class:"form-control",onChange:function(t){var a,c=t.target;e((a=c.value,function(){var e=Object(j.a)(u.a.mark((function e(t){var c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("filtros/".concat(a),a,"GET");case 3:return c=e.sent,console.log(c),e.next=7,c.json();case 7:s=e.sent,console.log(s),n=s.estadoBuscado,console.log(n),s.ok?t(Kt(n)):Ne.a.fire("Error",s.msg,"error"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))},name:"estado",id:"exampleFormControlSelect2",children:[Object(qe.jsx)("option",{defaultValue:!0,children:"Seleccione un estado..."}),Object(qe.jsx)("option",{value:"Activo",children:"Activo"}),Object(qe.jsx)("option",{value:"Inactivo",children:"Inactivo"})]})]})}),Object(qe.jsx)("div",{className:"row label-opaco",children:Object(qe.jsx)("div",{className:"col label-opaco",children:"Filtro por Estado"})})]}),Object(qe.jsx)("div",{className:"col-4 permiso-buscar-lu",children:Object(qe.jsxs)("div",{className:"row ",children:[Object(qe.jsx)("div",{className:"col ",children:Object(qe.jsx)("input",{type:"text",className:"form-control btnBuscar",value:i,name:"buscar",onChange:function(e){var t=e.target;n(Object(Ze.a)(Object(Ze.a)({},s),{},Object(Xe.a)({},t.name,t.value)))},placeholder:"Buscar"})}),Object(qe.jsx)("div",{className:"col ",children:Object(qe.jsx)("button",{type:"submit",onClick:function(){var t;e((t=s.buscar,function(){var e=Object(j.a)(u.a.mark((function e(a){var c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("filtros/buscar/".concat(t),t,"GET");case 3:return c=e.sent,console.log(c),e.next=7,c.json();case 7:s=e.sent,console.log(s),n=s.estadoBuscado,console.log(n),s.ok?a(Kt(n)):Ne.a.fire("Error",s.msg,"error"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))},name:"leso",class:"btn btn-primary ",children:"Buscar"})})]})})]}),Object(qe.jsxs)("div",{className:"row datos-tabla-lu label-lu",children:[Object(qe.jsx)("div",{className:"col-1 espacio-tabla-lu"}),Object(qe.jsx)("div",{className:"col datos-tabla-lu table-responsive",children:Object(qe.jsxs)("table",{class:"table texto-principal",children:[Object(qe.jsx)("thead",{children:Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{scope:"col ",children:"#"}),Object(qe.jsx)("th",{scope:"col",children:"Rut"}),Object(qe.jsx)("th",{scope:"col",children:"Nombre"}),Object(qe.jsx)("th",{scope:"col",children:"Apellido Paterno"}),Object(qe.jsx)("th",{scope:"col",children:"Estado"}),Object(qe.jsx)("th",{scope:"col",children:"Email Personal"}),Object(qe.jsx)("th",{scope:"col",children:"Cargo"}),Object(qe.jsx)("th",{scope:"col",children:"Rol"}),Object(qe.jsx)("th",{scope:"col",children:"Permisos"}),Object(qe.jsx)("th",{scope:"col",children:"Acciones"})]})}),Object(qe.jsx)("tbody",{children:l.map((function(t,a){var c=t.rut,s=t.id,n=t.name,r=t.apellidoPaterno,o=t.apellidoMaterno,i=t.email,l=t.area,u=t.cargo,j=t.segundoNombre,b=t.rol,m=t.estado,h=t.fono,O=t.nacimiento,f=t.imgusuario,p=t.ingreso,x=t.emailp,v=t.password;return Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{scope:"row",children:a}),Object(qe.jsx)("td",{children:c}),Object(qe.jsx)("td",{children:n}),Object(qe.jsx)("td",{children:r}),Object(qe.jsx)("td",{children:m}),Object(qe.jsx)("td",{children:i}),Object(qe.jsx)("td",{children:l}),Object(qe.jsx)("td",{children:u}),Object(qe.jsx)("td",{children:b}),Object(qe.jsxs)("td",{children:[Object(qe.jsx)("td",{children:"Administrador"==d.rol?Object(qe.jsx)("i",{className:"fas fa-trash",onClick:function(){!function(t,a){"Activo"===a?e(Gt({id:t,estado:a="Inactivo"})):"Inactivo"===a&&e(Gt({id:t,estado:a="Activo"}))}(s,m)}}):""}),Object(qe.jsx)("td",{children:"Administrador"==d.rol?Object(qe.jsx)(Ge.b,{to:"/mantenedorusuario2",children:Object(qe.jsx)("i",{className:"fas fa-pencil-alt iconos-lu",onClick:function(){!function(t,a,c,s,n,r,o,i,l,d,u,j,b,m,h,O,f){var p={rut:t,id:a,name:c,apellidoPaterno:s,apellidoMaterno:n,email:r,area:o,cargo:i,segundoNombre:l,rol:d,estado:u,fono:j,nacimiento:b,imgusuario:m,ingreso:h,emailp:O,password:f};console.log("Prueba",p),e(zt(p))}(c,s,n,r,o,i,l,u,j,b,m,h,O,f,p,x,v)}})}):""}),Object(qe.jsxs)("td",{children:[Object(qe.jsx)("i",{class:"fas fa-info-circle iconos-lu",onClick:function(){!function(t,a,c,s,n,r,o,i,l,d,u,j,b,m,h,O){e(zt({id:t,name:a,email:c,segundoNombre:s,apellidoPaterno:n,apellidoMaterno:r,area:o,fono:i,nacimiento:l,rol:d,cargo:u,rut:j,imgusuario:b,ingreso:m,emailp:h,estado:O})),e(it())}(s,n,i,j,r,o,l,h,O,b,u,c,f,p,x,m)}}),Object(qe.jsx)(Qt,{})]})]})]},a)}))})]})}),Object(qe.jsx)("div",{className:"col-1 espacio-tabla-lu"})]}),Object(qe.jsx)("div",{className:"row espacio-contenedor-lu label-mu"})]}),Object(qe.jsx)("div",{className:"col-1 derecha-formulario-mu"})]})]})},aa=function(){Object(r.c)((function(e){return e.auth})).uid;return Object(qe.jsxs)("div",{className:"configuracion",children:[Object(qe.jsx)("span",{className:"configuracion__titulo",children:"Ajustes de cuenta"}),Object(qe.jsxs)("form",{className:"form__ajuste",children:[Object(qe.jsxs)("div",{class:"mb-3",children:[Object(qe.jsx)("label",{for:"exampleInputEmail1",class:"form-label",children:"Nueva contrase\xf1a"}),Object(qe.jsx)("input",{type:"password",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(qe.jsxs)("div",{class:"mb-3",children:[Object(qe.jsx)("label",{for:"exampleInputPassword1",class:"form-label",children:"A\xf1adir correo personal"}),Object(qe.jsx)("input",{type:"password",class:"form-control",id:"exampleInputPassword1"})]}),Object(qe.jsxs)("div",{class:"mb-3",children:[Object(qe.jsx)("label",{for:"exampleInputEmail1",class:"form-label",children:"Cambiar numero de telefono"}),Object(qe.jsx)("input",{type:"email",class:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"})]}),Object(qe.jsx)("button",{type:"submit",class:"btn btn-primary",children:"Actualizar"})]})]})},ca=function(){var e=Object(r.c)((function(e){return e.auth})),t=e.name,a=(e.uid,e.email),c=e.segundoNombre,s=e.apellidoPaterno,n=e.apellidoMaterno,o=e.area,i=e.fono,l=e.nacimiento,d=e.ingreso,u=e.rol,j=(e.permisos,e.empresa),b=e.cargo,m=e.rut;e.imgusuario;return Object(qe.jsx)("div",{className:"main__home",children:Object(qe.jsxs)("div",{className:"perfil",children:[Object(qe.jsx)("div",{className:"perfil__contacto",children:Object(qe.jsxs)("div",{className:"perfil__contacto-foto",children:[Object(qe.jsx)("div",{className:"foto",children:Object(qe.jsx)("i",{className:"fas fa-user-circle perfil-foto"})}),Object(qe.jsxs)("div",{className:"nombre",children:[Object(qe.jsxs)("p",{className:"nombre-perfil",children:[t," ",c]}),Object(qe.jsxs)("p",{className:"nombre-perfil",children:[s," ",n]})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"rut",children:[Object(qe.jsx)("i",{class:"fas fa-barcode",children:Object(qe.jsxs)("span",{children:[" ",m]})}),Object(qe.jsx)("p",{children:"20234985-4"})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsxs)("i",{class:"fas fa-birthday-cake",children:[" ",Object(qe.jsx)("span",{children:" Cumplea\xf1os"})]}),Object(qe.jsx)("p",{children:vt()(l).format("DD-MM-YYYY")})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("i",{class:"fas fa-envelope",children:Object(qe.jsx)("span",{children:" Mail personal"})}),Object(qe.jsx)("p",{children:a})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("i",{class:"fas fa-envelope",children:Object(qe.jsx)("span",{children:" Mail corporativo"})}),Object(qe.jsx)("p",{children:a})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("i",{class:"fas fa-mobile",children:Object(qe.jsx)("span",{children:" Fono"})}),Object(qe.jsxs)("p",{children:[" ",i]})]})]})}),Object(qe.jsxs)("div",{className:"perfil__empresa",children:[Object(qe.jsx)("h3",{children:"Resumen"}),Object(qe.jsx)("br",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Cargo"}),Object(qe.jsx)("p",{children:b})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Area"}),Object(qe.jsx)("p",{children:o})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Empresa"}),Object(qe.jsx)("p",{children:j})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Fecha ingreso compa\xf1ia"}),Object(qe.jsx)("p",{children:vt()(d).format("DD-MM-YYYY")})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Rol"}),Object(qe.jsx)("p",{children:u})]}),Object(qe.jsx)("hr",{}),Object(qe.jsxs)("div",{className:"cumplea\xf1os__perfil",children:[Object(qe.jsx)("p",{children:"Permisos"}),Object(qe.jsx)("p",{})]})]})]})})},sa=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("tareas");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),s=c.tareas,console.log(c.tareas),t(na(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},na=function(e){return{type:F,payload:e}},ra=function(e){return{type:I,payload:e}},oa=function(e){return{type:L,payload:e}},ia=function(e){return{type:U,payload:e}},la=function(){return{type:J}},da=function(e){return{type:q,payload:e}},ua=function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("multimedias/tarea",e,"POST");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.imagenTarea);case 6:return s=t.sent,console.log("body",s),n=s.replace(/['"]+/g,""),a(ja(JSON.parse(s))),console.log(n),t.abrupt("return");case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},ja=function(e){return{type:z,payload:e}},ba=function(e){return{type:G,payload:e}},ma=function(e){return{type:V,payload:e}},ha=a(152),Oa=a.n(ha),fa=(a(513),a(327)),pa=a(15);Object(ha.registerLocale)("es",fa.a);var xa={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",padding:"2",margin:"2",transform:"translate(-50%, -50%)",backgroundColor:"#18191A",color:"#ffffff"},overlay:{transition:"opacity .2s ease-in-out",backgroundColor:"rgba(53, 5, 5, 0.3)"}},va={comentario:"",tarea:"",usuario:""},ya={titulo:"",contenido:"",fecha:new Date},ga={img:""},Na=function(){var e=Object(c.useState)(ga),t=Object(o.a)(e,2),a=t[0],s=(t[1],Object(c.useState)(!1)),n=Object(o.a)(s,2),i=n[0],l=n[1],d=Object(c.useState)(!1),b=Object(o.a)(d,2),m=b[0],h=b[1],O=Object(c.useState)(""),x=Object(o.a)(O,2),v=x[0],y=x[1],g=Object(r.b)();Object(c.useEffect)((function(){g(sa())}),[g]);var N=Object(c.useState)(ya),_=Object(o.a)(N,2),C=_[0],k=_[1],w=function(e){var t=e.target;k(Object(Ze.a)(Object(Ze.a)({},C),{},Object(Xe.a)({},t.name,t.value)))},S=Object(r.c)((function(e){return e.tareas})).activeTareas;Object(c.useEffect)((function(){k(S||ya)}),[S,k]);var E=Object(r.c)((function(e){return e.tareas})).tareas,M=Object(r.c)((function(e){return e.auth})),D=M.uid,P=M.imgusuario;Object(c.useEffect)((function(){var e;S&&(g((e=S._id,function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("tareas/images/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),n=s.imgTarea,console.log(s.imgTarea),a(da(n)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}())),g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("tareas/comentarios/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),n=s.comentarioTarea,console.log(s.comentarioTarea),a(ma(n)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(S._id)))}),[i]);var A=Object(r.c)((function(e){return e.tareas})).tareasImage,T=function(e){e.preventDefault(),k(ya),console.log(),S?(g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("tareas/".concat(e.id),e,"PUT");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.tareas);case 6:s=t.sent,console.log(s),s&&(console.log("ok"),Ne.a.fire("tareas editada","","success"),a(oa(e)),a(sa())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(C)),console.log("activo manito")):(console.log("no funcuiona"),g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a,c){var s,n,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c().auth,n=s.uid,r=s.name,t.prev=1,t.next=4,p("tareas",e,"POST");case 4:return o=t.sent,t.next=7,JSON.stringify(o.data.tareas);case 7:(i=t.sent)?(e.id=i.id,e.user={_id:n,name:r},a(ra(e)),a(sa()),Ne.a.fire("tareas creada","","success")):Ne.a.fire("Hubo un error contacte con el administrador","","error"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(C)))},R=function(e){g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("tareas/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),s.ok&&(console.log("ok"),Ne.a.fire("Tareas eliminada","","success"),a(la()),a(sa())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},Y=Object(c.useState)(ya.fecha),F=Object(o.a)(Y,2),I=F[0],L=F[1];Object(c.useEffect)((function(){I!==new Date&&(ya.fecha=I,console.log(ya.fecha))}),[I]);var U=function(e){L(e)},J=function(e){g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("tareas/estado/".concat(e.id),e,"PUT");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.tareas);case 6:s=t.sent,console.log(s),s&&(console.log("ok"),a(sa())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}({id:e}))},q=Object(r.c)((function(e){return e.tareas})).comentarios,z=function(e,t,a,c){l(!0),g(ia({_id:e,titulo:t,contenido:a,fecha:c}))},H=function(){l(!1),h(!1)};Object(c.useEffect)((function(){v&&(console.log(v.name),a.img=v,console.log(v))}),[v]);var G=function(){var e=Object(j.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.img&&((c=new FormData).set("img",a.img),c.set("usuario",D),c.set("tarea",S._id),g(ua(c)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t;g((t=e,function(){var e=Object(j.a)(u.a.mark((function e(a){var c,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("tareas/images/".concat(t.id),{id:t},"DELETE");case 3:return c=e.sent,e.next=6,JSON.stringify(c.data);case 6:s=e.sent,n=JSON.parse(s),console.log(n.newList),s&&(console.log("ok"),Ne.a.fire("Publicacion eliminada","","success"),a(da(n.newList))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()))},B=Object(c.useState)(va),W=Object(o.a)(B,2),K=W[0],X=W[1];return Object(qe.jsxs)("div",{className:"main__home",children:[Object(qe.jsx)("div",{className:"container_tarea",children:Object(qe.jsxs)("div",{className:"listar_tarea",children:[Object(qe.jsx)("div",{className:"header-tarea",children:Object(qe.jsx)("button",{type:"submit",className:"button_tareaa ",onClick:function(){h(!0)},children:"Crear"})}),Object(qe.jsx)("div",{className:"body-tarea",children:Object(qe.jsx)("div",{className:"cards",children:E.map((function(e){var t=e._id,a=e.titulo,c=e.contenido,s=e.fecha,n=e.estado;return!1===n?Object(qe.jsxs)("div",{className:"card",children:[Object(qe.jsxs)("div",{className:"card__content",onClick:function(){z(t,a,c,s)},children:[Object(qe.jsx)("p",{children:a}),Object(qe.jsx)("p",{children:c}),Object(qe.jsx)("p",{children:vt()(s).format("DD-MM-YYYY")})]}),Object(qe.jsxs)("div",{className:"card__info ",children:[Object(qe.jsxs)("div",{children:[" ",Object(qe.jsx)("i",{className:"far fa-edit iconos-eventos-ysm","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){z(t,a,c,s)}})]}),Object(qe.jsx)("div",{children:Object(qe.jsx)("i",{className:"fas fa-times iconos-lu iconos-eventos-ysm","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){J(t)}})}),Object(qe.jsx)("div",{children:Object(qe.jsx)("i",{className:"fas fa-trash iconos-eventos-ysm",onClick:function(){R(t)}})})]})]}):Object(qe.jsxs)("div",{className:"card ",children:[Object(qe.jsxs)("div",{className:"card__content confirmado",children:[Object(qe.jsx)("p",{children:a}),Object(qe.jsx)("p",{children:c}),Object(qe.jsx)("p",{children:vt()(s).format("DD-MM-YYYY")})]}),Object(qe.jsxs)("div",{className:"card__info confirmado",children:[Object(qe.jsxs)("div",{children:[" ",Object(qe.jsx)("i",{className:"far fa-edit iconos-eventos-ysm","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){z(t,a,c,s)}})]}),Object(qe.jsx)("div",{children:Object(qe.jsx)("i",{className:"fas fa-check iconos-lu iconos-eventos-ysm","data-toggle":"modal","data-target":"#exampleModal",onClick:function(){J(t)}})}),Object(qe.jsxs)("div",{children:[" ",Object(qe.jsx)("i",{className:"fas fa-trash iconos-eventos-ysm",onClick:function(){R(t)}})]})]})]})}))})})]})}),Object(qe.jsx)(rt.a,{isOpen:i,onRequestClose:H,style:xa,contentLabel:"Example Modal",children:Object(qe.jsx)("div",{className:"modal__tarea",children:Object(qe.jsx)("div",{className:"modal__tarea-body",children:Object(qe.jsxs)("div",{className:"modal__tarea-body-left",children:[Object(qe.jsxs)("form",{onSubmit:T,children:[Object(qe.jsxs)("div",{className:"modal__tarea-head",children:[Object(qe.jsx)("i",{className:"fas fa-pager"}),Object(qe.jsx)("span",{className:"modal__tarea-head-titulo",children:Object(qe.jsx)("input",{className:"input_tarea_editar",type:"text",name:"titulo",onChange:w,autoComplete:"off",value:C.titulo})})]}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-vencimiento",children:[Object(qe.jsx)("span",{children:"Vencimiento"}),Object(qe.jsx)(Oa.a,{selected:I,name:"fecha",ClassName:"tarea_fecha_editar",dateFormat:"dd-MM-yyyy",locale:"es",onChange:U})]}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-descripcion",children:[Object(qe.jsxs)("div",{className:"modal__tarea-body-left-descripcion-titulo",children:[Object(qe.jsx)("i",{className:"fas fa-file-alt"})," Descripcion"," "]}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-descripcion-input",children:[" ",Object(qe.jsx)("textarea",{className:"input_tarea_editar",type:"text",name:"contenido",onChange:w,value:C.contenido})," "]})]}),Object(qe.jsx)("button",{type:"submit",className:"button_tarea_editar",children:"Editar"})]}),Object(qe.jsx)("div",{className:"modal__tarea-body-left-attached",children:A.map((function(e){return Object(qe.jsxs)("div",{className:"modal__tarea-body-left-attached-iteam",children:[Object(qe.jsx)("div",{className:"modal__tarea-body-left-attached-iteam-left",children:Object(qe.jsx)("img",{src:e.multimedia})}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-attached-iteam-right",children:[Object(qe.jsx)("div",{className:"modal__tarea-body-left-attached-iteam-right-title",children:"one piece.jpg"}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-attached-iteam-right-opt",children:[Object(qe.jsxs)("span",{children:["a\xf1adido hace ",vt()(Date.now()).from(e.fecha,"minutes")]})," ",Object(qe.jsx)("i",{className:"fas fa-trash",onClick:function(){V(e)}})," "]})]})]})}))}),Object(qe.jsx)("form",{onSubmit:G,children:Object(qe.jsx)("div",{className:"modal__tarea-body-left-attached-upload",children:Object(qe.jsxs)("div",{className:"modal__tarea-body-left-attached-upload-btn",children:[Object(qe.jsx)("input",{type:"file",onChange:function(e){e.target.files&&y(e.target.files[0])}}),Object(qe.jsx)("button",{type:"submit",className:"button_tarea_editar",children:"Subir"})]})})}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment",children:[Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment-title",children:[Object(qe.jsx)("i",{className:"fas fa-comment-alt"})," Comentarios"]}),Object(qe.jsxs)("form",{className:"modal__tarea-body-left-comment-input",onSubmit:function(e){e.preventDefault(),K.tarea=S._id,K.usuario=D,g(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("tareas/comentarios",e,"POST");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.comentario);case 6:return s=t.sent,console.log("body",s),n=s.replace(/['"]+/g,""),a(ba(JSON.parse(s))),console.log(n),t.abrupt("return");case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}(K))},children:[Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment-input-img",children:[Object(qe.jsx)("img",{src:P})," "]}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment-input-content",children:[Object(qe.jsx)("input",{type:"text",name:"comentario",onChange:function(e){var t=e.target;X(Object(Ze.a)(Object(Ze.a)({},C),{},Object(Xe.a)({},t.name,t.value)))},onKeyPress:"submit",autoComplete:"off"})," "]})]}),Object(qe.jsx)("div",{className:"modal__tarea-body-left-comment-list",children:q.map((function(e){return Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment-list-item",children:[Object(qe.jsx)("div",{className:"modal__tarea-body-left-comment-list-item-img",children:Object(qe.jsx)("img",{src:P})}),Object(qe.jsxs)("div",{className:"modal__tarea-body-left-comment-list-item-info",children:[Object(qe.jsx)("div",{className:"modal__tarea-body-left-comment-list-item-info-title",children:vt()(e.fecha).format("h:mm a DD-MM")}),Object(qe.jsx)("div",{className:"modal__tarea-body-left-comment-list-item-info-content",children:e.comentario}),Object(qe.jsx)("div",{className:"modal__tarea-body-left-comment-list-item-info-opt",children:" "})]})]})}))})]})]})})})}),Object(qe.jsx)(rt.a,{isOpen:m,onRequestClose:H,style:xa,contentLabel:"Example Modal",children:Object(qe.jsx)("div",{className:"crear_tarea",children:Object(qe.jsxs)("form",{onSubmit:T,children:[Object(qe.jsx)("h3",{className:"titulo_tarea",children:"Crear tarea"}),Object(qe.jsx)("div",{children:Object(qe.jsx)("input",{className:"input_tarea",placeholder:"Titulo",type:"text",name:"titulo",onChange:w,autoComplete:"off",value:C.titulo})}),Object(qe.jsx)("div",{children:Object(qe.jsx)("textarea",{className:"input_tarea",placeholder:"Descripcion",type:"text",name:"contenido",onChange:w,value:C.contenido})}),Object(qe.jsx)("div",{children:Object(qe.jsx)(Oa.a,{selected:I,name:"fecha",className:"tarea_fecha",dateFormat:"dd-MM-yyyy",locale:"es",onChange:U})}),Object(qe.jsx)("div",{children:Object(qe.jsx)("button",{type:"submit",className:"button_tarea",children:"Crear"})})]})})})]})},_a=function(){var e=Object(r.c)((function(e){return e.auth})).rol;return Object(qe.jsxs)("aside",{className:"aside",children:[Object(qe.jsxs)("nav",{className:"nav-aside",children:[Object(qe.jsxs)("ul",{className:"listado",children:[Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/",children:[" ",Object(qe.jsx)("i",{className:"fas fa-home"}),Object(qe.jsx)("span",{children:" Principal"})," "]})," "]})," ",Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/chat",children:[" ",Object(qe.jsx)("i",{className:"fas fa-comments"}),Object(qe.jsx)("span",{children:" Chat"})," "]})," "]})," ",("Administrador"===e||"Jefatura"===e)&&Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/eventos",children:[" ",Object(qe.jsx)("i",{className:"far fa-calendar-alt"}),Object(qe.jsx)("span",{children:" Eventos"})]})," "]}),Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/tareas",children:[" ",Object(qe.jsx)("i",{className:"fas fa-clipboard-list"}),Object(qe.jsx)("span",{children:" Tareas"})," "]})," "]})," ",Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/calendario",children:[" ",Object(qe.jsx)("i",{className:"fas fa-calendar-alt"}),Object(qe.jsx)("span",{children:" Calendario"})," "]})," "]})," ","Administrador"===e&&Object(qe.jsx)("li",{className:"botones",children:Object(qe.jsxs)(Ge.b,{className:"li",to:"/usuarios",children:[" ",Object(qe.jsx)("i",{className:"fas fa-users-cog"}),Object(qe.jsx)("span",{children:" Usuario"})," "]})}),"Administrador"===e&&Object(qe.jsxs)("li",{className:"botones",children:[Object(qe.jsxs)(Ge.b,{className:"li",to:"/dashboard",children:[" ",Object(qe.jsx)("i",{className:"fas fa-chart-line"}),Object(qe.jsx)("span",{children:" Dashboard"})," "]})," "]})]})," "]})," "]})},Ca=function(){var e,t,a=Object(r.c)((function(e){return e.auth})),s=a.name,n=a.uid,o=a.imgusuario,i=Object(r.b)(),l=[],d=[],b=Object(r.c)((function(e){return e.Notification})).notificacion,m=(b.map((function(e){return e.vistopor})),b[0]);m&&(l=m.id,d=m.vistopor);var h=function(e,t){var a;i((a=t,function(){var e=Object(j.a)(u.a.mark((function e(t){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("posts/notificacion/",{id:a},"PUT");case 3:return c=e.sent,e.next=6,JSON.stringify(c.data);case 6:s=e.sent,console.log(s),s&&(console.log("ok"),t(Me())),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(c.useEffect)((function(){i(Me())}),[]),Object(qe.jsxs)("div",{className:"topnav",id:"myTopnav",children:[Object(qe.jsx)("a",(e={className:"titulo-navbar-ysm",href:"/"},Object(Xe.a)(e,"className","active"),Object(Xe.a)(e,"children","Reilak"),e)),Object(qe.jsxs)("div",{className:"topnav-right",children:[Object(qe.jsx)("a",{href:"#news",children:Object(qe.jsx)("img",{src:o,height:"30px",width:"30px",style:{borderRadius:"50%"}})}),Object(qe.jsx)("a",{href:"/perfil",children:s}),Object(qe.jsxs)("a",(t={href:"#",className:"nav-item dropdown",activeclassname:"active"},Object(Xe.a)(t,"className","nav-item nav-link "),Object(Xe.a)(t,"id","navbarDropdown"),Object(Xe.a)(t,"role","button"),Object(Xe.a)(t,"data-toggle","dropdown"),Object(Xe.a)(t,"aria-haspopup","true"),Object(Xe.a)(t,"aria-expanded","false"),Object(Xe.a)(t,"onClick",(function(){h(0,l)})),Object(Xe.a)(t,"children",[""!=d?d.includes(n)?Object(qe.jsx)("i",{className:"fas fa-bell navbar-iconos",style:{color:"$iconos"}}):Object(qe.jsx)("i",{className:"fas fa-bell navbar-iconos",style:{color:"red"}}):Object(qe.jsx)("i",{className:"fas fa-bell navbar-iconos",style:{color:"$iconos"}}),Object(qe.jsxs)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown",children:[Object(qe.jsx)("h6",{className:"dropdown-header nombre",children:"Notificaciones"}),Object(qe.jsx)("div",{className:"dropdown-divider"}),b.map((function(e,t){var a=e.descripcion,c=e.fecha;return Object(qe.jsxs)("a",{className:"dropdown-item rounded border border-secondary",href:"/",children:[" ",a," el"," ",vt()(c).format("DD-MM-YYYY, h:mm a")]})}))]})]),t)),Object(qe.jsx)("a",{href:"/configuracion",children:Object(qe.jsx)("i",{className:"fas fa-cog navbar-iconos"})}),Object(qe.jsx)("a",{href:"#",children:Object(qe.jsx)("i",{className:"fas fa-sign-out-alt navbar-iconos",onClick:function(){i((function(e){localStorage.clear(),e(Ke())}))}})})]}),Object(qe.jsx)("a",{href:"#",className:"icon",children:Object(qe.jsx)("i",{className:"fa fa-bars"})})]})},ka=a(201),wa={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},Sa=function(e){var t=e.event,a=t.titulo,c=t.start,s=t.end;return Object(qe.jsx)("div",{children:Object(qe.jsxs)("strong",{children:[" ",a,Object(qe.jsx)("br",{}),Object(qe.jsxs)("h6",{className:"fecha-evento-calendario",children:[vt()(c).format("h:mm a")," - ",vt()(s).format("h:mm a")]})]})})},Ea={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};rt.a.setAppElement("#root");var Ma=vt()().minutes(0).seconds(0).add(1,"hours"),Da=Ma.clone().add(1,"hours"),Pa={titulo:"",descripcion:"",start:Ma.toDate(),end:Da.toDate()},Aa=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.ui})).modalOpen,a=Object(r.c)((function(e){return e.events})),s=(a.events,a.activeEvents),n=Object(c.useState)(Ma.toDate()),i=Object(o.a)(n,2),l=(i[0],i[1],Object(c.useState)(Da.toDate())),d=Object(o.a)(l,2),u=(d[0],d[1],Object(c.useState)(Pa)),j=Object(o.a)(u,2),b=j[0],m=j[1],h=b.descripcion,O=b.titulo,f=b.start,p=b.end;Object(c.useEffect)((function(){m(s||Pa)}),[s,m]);return Object(qe.jsxs)(rt.a,{isOpen:t,onRequestClose:function(){e(lt()),e(Dt()),m(Pa)},style:Ea,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"titulo-calendarmodal-ysm",children:O})}),Object(qe.jsxs)("div",{className:"subheader-calendarmodal-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-ysm",children:vt()(f).format("DD-MM-yy")}),Object(qe.jsx)("div",{className:"fechafin-subheader-ysm",children:vt()(p).format("DD-MM-yy")})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-ysm",children:h}),Object(qe.jsx)("div",{className:"footer-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"link-footer-ysm",children:"Link"})})]})};a(571),a(572);vt.a.locale("es");var Ta=Object(ka.b)(vt.a),Ra=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.events})),a=t.events,s=(t.activeEvents,Object(r.c)((function(e){return e.auth})).uid),n=Object(c.useState)(localStorage.getItem("lastView")||"month"),i=Object(o.a)(n,2),l=i[0],d=i[1];Object(c.useEffect)((function(){e(Rt())}),[e]);return Object(qe.jsx)("div",{className:"main__home",children:Object(qe.jsx)("div",{className:"row primera-row",children:Object(qe.jsxs)("div",{className:"calendar-screen",children:[Object(qe.jsx)(ka.a,{localizer:Ta,events:a,startAccessor:"start",endAccessor:"end",messages:wa,eventPropGetter:function(e,t,a,c){var n=e.reunion.toString().search(s),r="Evento"==e.tipo||"Reunion"==e.tipo&&n>=0?"block":"Reunion"==e.tipo&&n<0?"none":"block";return{style:{backgroundColor:"Evento"==e.tipo?"#367CF7":"#465660",borderRadius:"0px",opacity:.8,display:r,color:"$color-icono"}}},onDoubleClickEvent:function(t){console.log(t),e(it())},onSelectEvent:function(t){e(Mt(t))},onView:function(e){d(e),localStorage.setItem("lastView",e)},onSelectSlot:function(t){console.log(t),e(Dt())},selectable:!0,views:["month","agenda"],view:l,components:{event:Sa}}),Object(qe.jsx)(Aa,{})]})})})},Ya=function(){var e=Object(r.b)(),t=Object(c.useContext)(ze).socket,a=Object(c.useState)(""),s=Object(o.a)(a,2),n=s[0],i=s[1];Object(c.useEffect)((function(){e(Pe())}),[e]);var l=Object(r.c)((function(e){return e.chat})).chats,d=Object(r.c)((function(e){return e.auth})).uid,b=function(a){var c;e(Te(a)),e((c=a.id,function(){var e=Object(j.a)(u.a.mark((function e(t){var a,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("chat/message/".concat(c));case 3:return a=e.sent,e.next=6,a.json();case 6:s=e.sent,n=s.message,t(Re(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()));for(var s=0;s<a.members.length;s++)a.members[s]!==d&&(e(Ie(a.members[s])),e(dt()));var n={id:a,uid:d};t.emit("read-last-message",{data:n})},m=Object(c.useMemo)((function(){return l.filter((function(e,t){if(!e.user.length)return"".concat(e.name).toLowerCase().includes(n.toLowerCase());for(var a=0;a<e.user.length;a++)return"".concat(e.user[a].name," ").concat(e.user[a].apellidoPaterno).toLowerCase().includes(n.toLowerCase())}))}),[l,n,e]);return Object(qe.jsxs)(qe.Fragment,{children:[Object(qe.jsxs)("div",{className:"chat__left-search",children:[Object(qe.jsx)("input",{type:"text",className:"chat__left-search-input",placeholder:"Buscar",onChange:function(e){e.preventDefault(),i(e.target.value)},value:n}),Object(qe.jsx)("button",{className:"chat__left-search-button",children:Object(qe.jsx)("i",{class:"fas fa-search search__icon"})})]}),Object(qe.jsx)("div",{className:"chat__left-list",children:m.map((function(e,t){return Object(qe.jsxs)("div",{className:"chat__left-list-item",onClick:function(){b(e)},children:[Object(qe.jsx)("div",{className:"chat__left-list-item-photo",children:Object(qe.jsx)("img",{src:e.img?e.img:e.user[0].imgusuario})}),Object(qe.jsxs)("div",{className:"chat__left-list-item-info",children:[Object(qe.jsxs)("div",{className:"chat__left-list-item-info-nombre",children:[e.name?e.name:e.user[0].name," ","personal"===e.tipo&&e.user?e.user[0].apellidoPaterno:"",e.lastmessage[0]&&!e.lastmessage[0].viewedby.includes(d)&&Object(qe.jsxs)("span",{children:[" ",Object(qe.jsx)("i",{class:"fas fa-bell"})]})]}),Object(qe.jsxs)("div",{className:"chat__left-list-item-info-last-message",children:[Object(qe.jsx)("span",{className:"chat__left-list-item-info-last-message-content",children:e.lastmessage[0]?"png"===e.lastmessage[0].message.substr(-3)||"jpg"===e.lastmessage[0].message.substr(-3)||"gif"===e.lastmessage[0].message.substr(-3)||"jpge"===e.lastmessage[0].message.substr(-3)?Object(qe.jsx)("i",{class:"fas fa-image",children:" Imagen"}):"mp4"===e.lastmessage[0].message.substr(-3)?Object(qe.jsx)("i",{class:"fas fa-video",children:" Video"}):e.lastmessage[0].message:""}),Object(qe.jsxs)("span",{className:"chat__left-list-item-info-last-message-date",children:[" ",e.lastmessage[0]?vt()(e.lastmessage[0].fecha).format("h:mm a DD-MM"):""]})]})]})]})}))})]})},Fa={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"#242526"},overlay:{transition:"opacity .2s ease-in-out",backgroundColor:"rgba(53, 5, 5, 0.3)"}},Ia={name:"",img:"",members:[],admin:"",descripcion:"",privacidad:"",tipo:""},La={stepCurrent:1},Ua=function(){var e=Object(c.useContext)(ze).socket,t=Object(c.useState)(La),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(Ia),l=Object(o.a)(i,2),d=l[0],b=l[1],m=Object(c.useState)(!1),h=Object(o.a)(m,2),O=h[0],f=h[1],x=Object(c.useState)(!1),v=Object(o.a)(x,2),y=v[0],g=v[1],N=Object(c.useState)(!1),_=Object(o.a)(N,2),C=_[0],k=_[1],w=Object(c.useState)(!1),S=Object(o.a)(w,2),E=S[0],M=S[1],D=Object(c.useState)(""),P=Object(o.a)(D,2),A=P[0],T=P[1],R=Object(c.useState)([]),Y=Object(o.a)(R,2),F=Y[0],I=Y[1],L=Object(c.useState)([]),U=Object(o.a)(L,2),J=U[0],q=U[1],z=Object(c.useState)(null),H=Object(o.a)(z,2),G=H[0],V=H[1],B=s.stepCurrent,W=function(e){"anterior"==e?n(Object(Ze.a)(Object(Ze.a)({},s),{},{stepCurrent:B-1})):"siguiente"==e&&n(Object(Ze.a)(Object(Ze.a)({},s),{},{stepCurrent:B+1}))},K=Object(c.useState)(""),X=Object(o.a)(K,2),Z=X[0],$=X[1],Q=Object(r.c)((function(e){return e.chat})).chats,ee=function(e){if(e.target.files){$(e.target.files[0]);e.target.files[0];var t=new FileReader;t.addEventListener("load",(function(){V(t.result)})),t.readAsDataURL(e.target.files[0])}};Object(c.useEffect)((function(){Z&&(console.log(Z.name),d.img=Z)}),[Z]);var te=function(e){var t=e.target;b(Object(Ze.a)(Object(Ze.a)({},d),{},Object(Xe.a)({},t.name,t.value)))},ae=function(e){I([]),k(!1),M(!1),g(!1),n(La)},ce=Object(r.b)();Object(c.useEffect)((function(){ce(Bt())}),[ce]);var se=Object(r.c)((function(e){return e.users})).users,ne=Object(r.c)((function(e){return e.auth})).uid;Object(c.useEffect)((function(){q(se.filter((function(e){return e.id!==ne})))}),[se,ce,C,E]);var re=function(e){e.preventDefault(),T(e.target.value)},oe=Object(c.useMemo)((function(){return se.filter((function(e){if(e.id!==ne)return"".concat(e.name," ").concat(e.segundoNombre," ").concat(e.apellidoPaterno," ").concat(e.apellidoMaterno).toLowerCase().includes(A.toLowerCase())}))}),[J,A]),ie=Object(c.useMemo)((function(){return J.filter((function(e){if(e.id!==ne)return"".concat(e.name," ").concat(e.segundoNombre," ").concat(e.apellidoPaterno," ").concat(e.apellidoMaterno).toLowerCase().includes(A.toLowerCase())}))}),[J,F,A]),le=function(e,t){I([].concat(Object(pa.a)(F),[t]));for(var a=0;a<J.length;a++)J[a].id===t.id&&J.splice(a,1)},de=function(e,t){q([].concat(Object(pa.a)(J),[t])),F.splice(e,1),console.log(e,"+",t)},ue=function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.members=[],a.preventDefault(),(c=new FormData).set("img",d.img),F.forEach((function(e){return d.members.push(e.id)})),t.prev=5,t.next=8,p("multimedias",c,"POST");case 8:return s=t.sent,t.next=11,JSON.stringify(s.data.multimedia);case 11:(n=t.sent)&&(d.img=n.replace(/['"]+/g,""),d.admin=ne,d.members.push(ne)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.log(t.t0);case 18:return t.next=20,e.emit("create-sala-chat",{data:d});case 20:ae(),a.target=null;case 22:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(qe.jsxs)("div",{className:"chat__left-heard",children:[Object(qe.jsx)("div",{className:"chat__left-heard-left",children:Object(qe.jsx)("h4",{children:"Chats"})}),Object(qe.jsxs)("div",{className:"chat__left-heard-right",children:[Object(qe.jsx)("div",{className:"chat__left-heard-right-icon",onClick:function(){f(!O),y&&g(!1)},children:Object(qe.jsx)("i",{class:"fas fa-plus"})}),O&&Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat",children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-header",children:"Nuevo chat"}),Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body",children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar",onChange:re,value:A})}),Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-list",children:oe.map((function(e){return Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item",onClick:function(){!function(e){var t=Q.filter((function(e,t){if(e.user.length)for(var a=0;a<e.user.length;a++)return"".concat(e)})).filter((function(t,a){return t.user[0]._id===e.id}));t.length>=1?(console.log("existe"),ce(Te(t[0]))):(console.log("no existe"),ce(Te(e))),ce(dt()),f(!1)}(e)},children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-item-left",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item-right",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{}),e.apellidoPaterno," ",e.apellidoMaterno]})]})}))})]})]}),Object(qe.jsx)("div",{className:"chat__left-heard-right-icon",onClick:function(){g(!y),O&&f(!1)},children:Object(qe.jsx)("i",{class:"fas fa-ellipsis-h"})}),y&&Object(qe.jsxs)("div",{className:"contenedor__option-chat",children:[Object(qe.jsx)("button",{className:"contenedor__option-chat-btn",onClick:function(){Ia.tipo="grupo",Ia.privacidad="privado",k(!0)},children:"Crear nuevo grupo"}),Object(qe.jsx)("button",{className:"contenedor__option-chat-btn",onClick:function(){Ia.privacidad="publico",Ia.tipo="canal",M(!0)},children:"Crear nuevo canal"}),Object(qe.jsx)("div",{children:1==B?Object(qe.jsx)(rt.a,{isOpen:C,onRequestClose:ae,style:Fa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"creategrupo__modal",children:[Object(qe.jsx)("div",{className:"creategrupo__modal-body",children:Object(qe.jsxs)("div",{className:"creategrupo__modal-body-top",children:[G?Object(qe.jsx)("div",{className:"creategrupo__modal-body-picture",children:Object(qe.jsx)("img",{src:G})}):Object(qe.jsxs)("div",{className:"creategrupo__modal-body-picture",children:[Object(qe.jsx)("input",{type:"file",id:"file",name:"file",hidden:!0,onChange:ee,accept:".img,.png,.mp4,.jpg,.jepg"}),Object(qe.jsx)("label",{for:"file",children:Object(qe.jsx)("i",{class:"fas fa-camera"})})]}),Object(qe.jsx)("div",{className:"creategrupo__modal-body-name",children:Object(qe.jsx)("input",{type:"text",placeholder:"nombre del grupo",name:"name",onChange:te})})]})}),Object(qe.jsxs)("div",{className:"creategrupo__modal-footer",children:[Object(qe.jsx)("button",{className:"birthday__modal-btn",onClick:ae,children:"Cancelar"}),Object(qe.jsx)("button",{className:"birthday__modal-btn",type:"button",onClick:function(){W("siguiente")},children:"Siguiente"})]})]})}):Object(qe.jsx)(rt.a,{isOpen:C,onRequestClose:ae,style:Fa,closeTimeoutMS:1,children:Object(qe.jsxs)("form",{className:"createcanal__modal",onSubmit:ue,children:[Object(qe.jsx)("div",{className:"createcanal__modal-header",children:"A\xf1adir miembros"}),Object(qe.jsxs)("div",{className:"createcanal__modal-body",children:[Object(qe.jsx)("div",{className:"chat__userlected",children:F.map((function(e,t){return Object(qe.jsxs)("div",{className:"chat__userlected-item",onClick:function(){de(t,e)},children:[Object(qe.jsx)("img",{src:e.imgusuario}),Object(qe.jsxs)("div",{children:[e.name," ",t]})]},t)}))}),Object(qe.jsx)("div",{className:"createcanal__modal-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar",onChange:re,value:A})}),Object(qe.jsx)("div",{className:"createcanal__modal-body-users",children:ie.map((function(e,t){return Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item",onClick:function(){le(0,e)},children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-item-left",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item-right",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{}),e.apellidoPaterno," ",e.apellidoMaterno,"  ",t]})]},t)}))})]}),Object(qe.jsxs)("div",{className:"creategrupo__modal-footer",children:[Object(qe.jsx)("button",{className:"birthday__modal-btn",type:"button",onClick:function(){W("anterior")},children:"Volver"}),Object(qe.jsx)("button",{type:"submit",className:"birthday__modal-btn",children:"Crear"})]})]})})}),Object(qe.jsx)("div",{children:1==B?Object(qe.jsx)(rt.a,{isOpen:E,onRequestClose:ae,style:Fa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"creategrupo__modal",children:[Object(qe.jsxs)("div",{className:"creategrupo__modal-body",children:[Object(qe.jsxs)("div",{className:"creategrupo__modal-body-top",children:[G?Object(qe.jsx)("div",{className:"creategrupo__modal-body-picture",children:Object(qe.jsx)("img",{src:G})}):Object(qe.jsxs)("div",{className:"creategrupo__modal-body-picture",children:[Object(qe.jsx)("input",{type:"file",id:"file",name:"file",hidden:!0,onChange:ee,accept:".img,.png,.mp4,.jpg,.jepg"}),Object(qe.jsx)("label",{for:"file",children:Object(qe.jsx)("i",{class:"fas fa-camera"})})]}),Object(qe.jsx)("div",{className:"creategrupo__modal-body-name",children:Object(qe.jsx)("input",{type:"text",placeholder:"Nombre del canal",name:"name",onChange:te})})]}),Object(qe.jsx)("div",{className:"creategrupo__modal-body-bottom",children:Object(qe.jsx)("div",{className:"creategrupo__modal-body-descripcion",children:Object(qe.jsx)("input",{type:"text",placeholder:"Descripcion del canal",name:"descripcion",onChange:te})})})]}),Object(qe.jsxs)("div",{className:"creategrupo__modal-footer",children:[Object(qe.jsx)("button",{className:"birthday__modal-btn",onClick:ae,children:"Cancelar"}),Object(qe.jsx)("button",{className:"birthday__modal-btn",type:"button",onClick:function(){W("siguiente")},children:"Siguiente"})]})]})}):Object(qe.jsx)(rt.a,{isOpen:E,onRequestClose:ae,style:Fa,closeTimeoutMS:1,children:Object(qe.jsxs)("form",{className:"createcanal__modal",onSubmit:ue,children:[Object(qe.jsx)("div",{className:"createcanal__modal-header",children:"A\xf1adir miembros"}),Object(qe.jsxs)("div",{className:"createcanal__modal-body",children:[Object(qe.jsx)("div",{className:"chat__userlected",children:F.map((function(e,t){return Object(qe.jsxs)("div",{className:"chat__userlected-item",onClick:function(){de(t,e)},children:[Object(qe.jsx)("img",{src:e.imgusuario}),Object(qe.jsx)("div",{children:e.name})]},t)}))}),Object(qe.jsx)("div",{className:"createcanal__modal-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar"})}),Object(qe.jsx)("div",{className:"createcanal__modal-body-users",children:ie.map((function(e,t){return Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item",onClick:function(){le(0,e)},children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-item-left",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item-right",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{}),e.apellidoPaterno," ",e.apellidoMaterno]})]},t)}))})]}),Object(qe.jsxs)("div",{className:"creategrupo__modal-footer",children:[Object(qe.jsx)("button",{className:"birthday__modal-btn",type:"button",onClick:function(){W("anterior")},children:"Volver"}),Object(qe.jsx)("button",{type:"submit",className:"birthday__modal-btn",children:"Crear"})]})]})})})]})]})]})},Ja=function(){var e=Object(r.b)(),t=Object(c.useState)(""),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(r.c)((function(e){return e.infoChat})).infoChat,l=Object(r.c)((function(e){return e.chat})).chatActivo,d=Object(r.c)((function(e){return e.chat})).conexion,u=Object(r.c)((function(e){return e.chat})).miembros,j=Object(r.c)((function(e){return e.auth})).uid,b=u.filter((function(e){if(l.id===e._id)return e.idusuario!==j}));Object(c.useEffect)((function(){b.lenght>0&&e(Ie(b[0].idusuario))}),[u]),Object(c.useEffect)((function(){null!==d&&n(vt()(Date.now()).from(d.fechatermino,"minutes"))}),[d]);return Object(qe.jsx)(qe.Fragment,{children:l&&Object(qe.jsxs)("div",{className:"chat__right-heard",children:[Object(qe.jsxs)("div",{className:"chat__right-heard-left",children:[Object(qe.jsx)("div",{className:"chat__right-heard-left-photo",children:Object(qe.jsx)("img",{src:l.img?l.img:l.user?l.user[0].imgusuario:l.imgusuario})}),Object(qe.jsxs)("div",{className:"chat__right-heard-left-info",children:["personal"===l.tipo?Object(qe.jsxs)("div",{className:"chat__right-list-item-info-nombre",children:[l.name?l.name:l.user[0].name," ",l.segundoNombre?l.segundoNombre:l.user[0]?l.user[0].segundoNombre:""," ",l.segundoNombre?l.apellidoPaterno:l.user[0]?l.user[0].apellidoPaterno:""," ",l.apellidoMaterno?l.apellidoMaterno:l.user[0]?l.user[0].apellidoMaterno:""]}):Object(qe.jsxs)("div",{className:"chat__right-list-item-info-nombre-nopersonal",children:[l.name?l.name:l.user[0].name," ",l.segundoNombre?l.segundoNombre:l.user[0]?l.user[0].segundoNombre:""," ",l.segundoNombre?l.apellidoPaterno:l.user[0]?l.user[0].apellidoPaterno:""," ",l.apellidoMaterno?l.apellidoMaterno:l.user[0]?l.user[0].apellidoMaterno:""]}),"personal"===l.tipo&&Object(qe.jsx)("div",{className:"chat__right-list-item-info-last-conection",children:b[0]&&b[0].online?"Activo ahora":d&&null===d.fechatermino?"activo ahora":d?"activo hace ".concat(s):""})]})]}),l.user&&Object(qe.jsx)("div",{className:"chat__right-heard-right",children:Object(qe.jsx)("div",{className:"chat__right-heard-right-icon",onClick:function(){i?(e(dt()),console.log("se cerro")):(e({type:ee}),console.log("se abrio"))},children:Object(qe.jsx)("i",{class:"fas fa-info-circle"})})})]})})},qa=function(){Object(r.b)();var e=Object(c.useContext)(ze).socket,t=Object(c.useRef)(null),a=function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},s=Object(r.c)((function(e){return e.chat})).messages,n=Object(r.c)((function(e){return e.auth})).uid,o=Object(r.c)((function(e){return e.chat})).chatActivo;Object(c.useEffect)((function(){a()}),[s]),a();return Object(qe.jsx)("div",{className:"chat__history",id:"messages",onMouseDown:function(t){var a={id:o,uid:n};e.emit("read-last-message",{data:a})},children:s.map((function(e,a){return e.from===n?Object(qe.jsxs)("div",{className:"chat__message-right",children:[Object(qe.jsxs)("div",{className:"chat__message-info-right",children:[Object(qe.jsx)("div",{className:"chat__message-info-name"}),Object(qe.jsx)("div",{className:"chat__message-info-content",children:"png"===e.message.substr(-3)||"jpg"===e.message.substr(-3)||"jpge"===e.message.substr(-3)||"gif"===e.message.substr(-3)?Object(qe.jsx)("img",{src:e.message}):"mp4"===e.message.substr(-3)?Object(qe.jsx)(pt.a,{url:e.message,width:"100%",height:"100%",controls:!0,pip:!0,volume:"0.8",light:"true"}):e.message}),Object(qe.jsxs)("div",{className:"chat__message-info-time",children:[vt()(e.fecha).format(" h:mm a, DD-MM")," "]})," "]}),Object(qe.jsx)("div",{ref:t})]},a):Object(qe.jsxs)("div",{className:"chat__message-left",children:[Object(qe.jsx)("div",{className:"chat__message-photo",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsxs)("div",{className:"chat__message-info-left",children:[Object(qe.jsxs)("div",{className:"chat__message-info-name",children:[e.name," ",e.segundoNombre," ",e.apellidoPaterno," ",e.apellidoMaterno]}),Object(qe.jsx)("div",{className:"chat__message-info-content",children:"png"===e.message.substr(-3)||"jpg"===e.message.substr(-3)||"jpge"===e.message.substr(-3)||"gif"===e.message.substr(-3)?Object(qe.jsx)("img",{src:e.message}):"mp4"===e.message.substr(-3)?Object(qe.jsx)(pt.a,{url:e.message,width:"100%",height:"100%",controls:!0,pip:!0,volume:"0.8",light:"true"}):e.message}),Object(qe.jsx)("div",{className:"chat__message-info-time",children:vt()(e.fecha).format("h:mm a, DD-MM")})]}),Object(qe.jsx)("div",{ref:t})]},a)}))})},za=a(318),Ha=a.n(za),Ga={img:""},Va={nameFile:""},Ba=function(){var e=Object(c.useRef)(),t=Object(c.useContext)(ze).socket,a=Object(c.useState)([]),s=Object(o.a)(a,2),n=(s[0],s[1],Object(c.useState)(!1)),i=Object(o.a)(n,2),l=i[0],d=i[1],b=Object(c.useState)(""),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(c.useState)(!1),x=Object(o.a)(f,2),v=x[0],y=x[1],g=Object(r.c)((function(e){return e.chat})).chatActivo,N=Object(r.c)((function(e){return e.auth})).uid,_=Object(c.useState)(Ga),C=Object(o.a)(_,2),k=C[0],w=(C[1],Object(c.useState)(!1)),S=Object(o.a)(w,2),E=S[0],M=S[1],D=Object(c.useState)(""),P=Object(o.a)(D,2),A=P[0],T=P[1];Object(c.useEffect)((function(){A&&(console.log(A.name),k.img=A,console.log(A))}),[A]),A&&(Va.nameFile=A.name);var R=function(){var a=Object(j.a)(u.a.mark((function a(c){var s,n,r,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(y(!0),console.log(h),c.preventDefault(),!k.img){a.next=30;break}return(s=new FormData).set("img",k.img),a.prev=6,a.next=9,p("multimedias",s,"POST");case 9:return n=a.sent,a.next=12,JSON.stringify(n.data.multimedia);case 12:return r=a.sent,console.log("body",r),o=r.replace(/['"]+/g,""),t.emit("send-message",{from:N,to:g.id,message:o,viewedby:[N]}),e.current.value="",O(""),T(""),y(!1),M(!1),Ga.img="",Va.nameFile="",c.target.files=null,a.abrupt("return");case 27:a.prev=27,a.t0=a.catch(6),console.log(a.t0);case 30:if(0!==h.length){a.next=34;break}return console.log(h),console.log("llergo"),a.abrupt("return");case 34:t.emit("send-message",{from:N,to:g.id,message:h,viewedby:[N]}),O("");case 36:case"end":return a.stop()}}),a,null,[[6,27]])})));return function(e){return a.apply(this,arguments)}}();return Object(qe.jsxs)(qe.Fragment,{children:[E&&Object(qe.jsx)("div",{className:"sendMessage__files",children:Object(qe.jsx)("div",{className:"sendMessage__files-item",children:Object(qe.jsxs)("span",{style:v?{display:"flex"}:{},children:["Multimedia: ",Va.nameFile," ",v?Object(qe.jsx)("div",{class:"loader__message-file"}):Object(qe.jsx)("i",{onClick:function(e){T(null),M(!1),e.target=null,Va.nameFile="",k.img=""},class:"fa fa-times"})," "]})})}),l&&Object(qe.jsx)("div",{className:"sendMessage__emoji-select",children:Object(qe.jsx)(Ha.a,{className:"emoji",onEmojiClick:function(e,t){console.log(t),O("".concat(h).concat(t.emoji))}})}),Object(qe.jsxs)("form",{className:"chat__SendMessage",onSubmit:R,children:[Object(qe.jsxs)("div",{className:"chat__SendMessage-left",children:[Object(qe.jsx)("div",{className:"chat__SendMessage-left-icon",onClick:function(){d(!l)},children:Object(qe.jsx)("i",{class:"far fa-grin"})}),Object(qe.jsxs)("div",{className:"chat__SendMessage-left-icon",children:[Object(qe.jsx)("input",{type:"file",id:"upload",ref:e,hidden:!0,onChange:function(e){console.log(k),e.target.files&&(T(e.target.files[0]),M(!0))},accept:".img,.png,.mp4,.jpg,.jepg,.gif"}),Object(qe.jsx)("label",{for:"upload",children:Object(qe.jsx)("i",{class:"fas fa-photo-video"})})]})]}),Object(qe.jsx)("div",{className:"chat__SendMessage-right",children:Object(qe.jsx)("input",{onKeyPress:"submit",className:"chat__SendMessage-right-input",type:"text",placeholder:" Escribe un mensaje",value:h,onChange:function(e){var t=e.target;O(t.value)},onMouseDown:function(e){var a={id:g,uid:N};t.emit("read-last-message",{data:a})}})})]})]})},Wa={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",padding:"0",margin:"0",transform:"translate(-50%, -50%)",backgroundColor:"#18191A"},overlay:{transition:"opacity .2s ease-in-out",backgroundColor:"rgba(53, 5, 5, 0.3)"}},Ka={members:[],chatId:""},Xa=function(){var e=Object(c.useContext)(ze).socket,t=Object(r.b)(),a=Object(c.useState)(Ka),s=Object(o.a)(a,2),n=s[0],i=(s[1],Object(c.useState)(!1)),l=Object(o.a)(i,2),d=(l[0],l[1],Object(c.useState)(!1)),b=Object(o.a)(d,2),m=b[0],h=b[1],O=Object(c.useState)(!1),x=Object(o.a)(O,2),v=x[0],y=x[1],g=Object(c.useState)(!1),N=Object(o.a)(g,2),_=N[0],C=N[1],k=Object(c.useState)(!1),w=Object(o.a)(k,2),S=w[0],E=w[1],M=Object(c.useState)(!1),D=Object(o.a)(M,2),P=D[0],A=D[1],T=Object(c.useState)(""),R=Object(o.a)(T,2),Y=R[0],F=R[1],I=Object(c.useState)(!1),L=Object(o.a)(I,2),U=L[0],J=L[1],q=Object(c.useState)([]),z=Object(o.a)(q,2),H=z[0],G=z[1],V=Object(c.useState)([]),B=Object(o.a)(V,2),W=B[0],K=B[1],X=Object(c.useState)([]),Z=Object(o.a)(X,2),$=Z[0],Q=Z[1],ee=Object(c.useState)(6),te=Object(o.a)(ee,2),ae=te[0],ce=te[1],se=Object(r.c)((function(e){return e.chat})).chatActivo;Object(c.useEffect)((function(){t(Ye(se.id))}),[P]),Object(c.useEffect)((function(){var e;t((e=se.id,function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("chat/images/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),n=s.message,console.log(s.message),a(Ue(n)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()))}),[_]),Object(c.useEffect)((function(){var e;t((e=se.id,function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f("chat/videos/".concat(e));case 3:return c=t.sent,t.next=6,c.json();case 6:s=t.sent,console.log(s),n=s.message,console.log(s.message),a(Je(n)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()))}),[S]);var ne=Object(r.c)((function(e){return e.chat})).messagevideo,re=Object(r.c)((function(e){return e.chat})).messageimg,oe=(Object(r.c)((function(e){return e.chat})).miembros,Object(r.c)((function(e){return e.chat})).memberView),ie=Object(r.c)((function(e){return e.users})).users,le=Object(r.c)((function(e){return e.chat})).chats,de=Object(r.c)((function(e){return e.auth})).uid;Object(c.useEffect)((function(){var e=le.filter((function(e){return e.id===se.id}));Q(ie.filter((function(t){if(!e[0].members.includes(t.id))return t})))}),[ie,t,U,se,n]);var ue=function(e){h(!1)},je=function(e){y(!1)},be=function(){y(!0)},me=function(e){C(!1),E(!1),A(!1),J(!1),G([])};Object(c.useEffect)((function(){var e=le.filter((function(e){return e.id===se.id}));K(ie.filter((function(t){return e[0].members.includes(t.id)})))}),[ie,t,P,se,n]);var he=function(e){e.preventDefault(),F(e.target.value)},Oe=Object(c.useMemo)((function(){return W.filter((function(e){if(e.id!==de)return"".concat(e.name," ").concat(e.segundoNombre," ").concat(e.apellidoPaterno," ").concat(e.apellidoMaterno).toLowerCase().includes(Y.toLowerCase())}))}),[W,H,Y]),fe=Object(c.useMemo)((function(){return $.filter((function(e){return"".concat(e.name," ").concat(e.segundoNombre," ").concat(e.apellidoPaterno," ").concat(e.apellidoMaterno).toLowerCase().includes(Y.toLowerCase())}))}),[$,H,Y]),pe=function(e,t){Q([].concat(Object(pa.a)($),[t])),H.splice(e,1),console.log(e,"+",t)},xe=function(e){console.log(W),console.log($);for(var a=0;a<W.length;a++)W[a].id===e.id&&(console.log(W[a]),W.splice(a,1));console.log(e);var c={idChat:se.id,user:e.id};t(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a){var c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("chat/miembro/".concat(e._id),e,"PUT");case 3:return c=t.sent,t.next=6,JSON.stringify(c.data.miembro);case 6:s=t.sent,console.log(s),s&&(console.log("ok"),a(Ye(e.idChat)),a(Pe())),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),Ne.a.fire("Hubo un error contacte con el administrador","","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(c))},ve=function(){var t=Object(j.a)(u.a.mark((function t(a){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a.preventDefault(),c=0;c<$.length;c++)$[c].id===H.id&&$.splice(c,1);return n.members=[],n.chatId=se.id,H.forEach((function(e){return n.members.push(e.id)})),t.next=7,e.emit("add-member-chat",{data:n});case 7:n.members=[],me(),a.target=null;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(qe.jsxs)("div",{className:"chat__info",children:[Object(qe.jsxs)("div",{className:"chat__info-heard",children:[Object(qe.jsx)("div",{className:"chat__info-heard-photo",children:Object(qe.jsx)("img",{src:se.img?se.img:se.user?se.user[0].imgusuario:se.imgusuario})}),Object(qe.jsxs)("div",{className:"chat__info-heard-info",children:[se.name," ",se.user!==[]?se.admin.includes(de)&&Object(qe.jsx)("i",{class:"fas fa-pencil-alt",onClick:function(){h(!0)}}):""]}),Object(qe.jsx)("div",{className:"chat__info-heard-info",children:Object(qe.jsxs)("span",{children:["grupo"===se.tipo?"Grupo creado":"canal"===se.tipo?"Canal creado":"Conversacion iniciada"," el ",vt()(se.fecha).format("DD-MM-YYYY")]})}),"canal"===se.tipo&&Object(qe.jsxs)("div",{className:"chat__info-heard-info-description",children:[Object(qe.jsx)("div",{className:"chat__info-heard-info-description-icon",children:Object(qe.jsx)("i",{class:"fas fa-info-circle"})}),Object(qe.jsx)("div",{className:"chat__info-heard-info-description-data",children:se.descripcion})]})]}),Object(qe.jsxs)("div",{className:"chat__info-body",children:[Object(qe.jsxs)("div",{className:"chat__info-body-multimedias",children:[Object(qe.jsxs)("div",{className:"chat__info-body-multimedias-btn",onClick:function(){C(!0)},children:[Object(qe.jsx)("i",{class:"fas fa-images"}),Object(qe.jsx)("span",{children:"Imagenes"})]}),Object(qe.jsxs)("div",{className:"chat__info-body-multimedias-btn",onClick:function(){E(!0)},children:[Object(qe.jsx)("i",{class:"fas fa-video"}),Object(qe.jsx)("span",{children:"Videos"})]}),Object(qe.jsx)(rt.a,{isOpen:m,onRequestClose:ue,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"updatechat__modal",children:[Object(qe.jsxs)("div",{className:"updatechat__modal-picture",children:[Object(qe.jsx)("img",{src:se.img}),Object(qe.jsx)("div",{className:"chat__info-heard-photo-update",children:Object(qe.jsx)("i",{class:"fas fa-camera"})})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-data-update",children:[Object(qe.jsxs)("div",{className:"updatechat__modal-form",children:[Object(qe.jsx)("input",{className:"updatechat__modal-form-input",type:"text",placeholder:" ",value:se.name}),Object(qe.jsx)("label",{for:"",class:"for__modal-form-input",children:"Nombre"})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-form",children:[Object(qe.jsx)("input",{className:"updatechat__modal-form-input",type:"text",placeholder:" ",value:se.descripcion}),Object(qe.jsx)("label",{for:"",class:"for__modal-form-input",children:"Descripcion"})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-info-update-type",children:[Object(qe.jsx)("div",{className:"updatechat__modal-info-update-type-left",children:"Tipo"}),Object(qe.jsx)("div",{className:"updatechat__modal-info-update-type-right",children:"privado"===se.privacidad?Object(qe.jsxs)("select",{children:[Object(qe.jsx)("option",{value:"privado",children:se.privacidad}),Object(qe.jsx)("option",{value:"publico",children:"Publico"})]}):Object(qe.jsxs)("select",{children:[Object(qe.jsx)("option",{value:"publico",children:se.privacidad}),Object(qe.jsx)("option",{value:"privado",children:"Privado"})]})})]})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-info-update-members",children:[Object(qe.jsxs)("div",{className:"updatechat__modal-info-update-members-admins",onClick:function(){be()},children:[Object(qe.jsx)("i",{class:"fas fa-shield-virus"}),Object(qe.jsx)("span",{children:"Administradores"})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-info-update-members-admins",onClick:function(){be()},children:[Object(qe.jsx)("i",{class:"fas fa-user-friends"}),Object(qe.jsx)("span",{children:"Usuarios"})]})]}),Object(qe.jsxs)("div",{className:"updatechat__modal-btn",children:[Object(qe.jsx)("button",{className:"updatechat__modal-btn-opt",onClick:ue,children:"Cancelar"}),Object(qe.jsx)("button",{className:"updatechat__modal-btn-opt",children:"Guardar"})]})]})}),Object(qe.jsx)(rt.a,{isOpen:v,onRequestClose:je,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"modal__users-admin",children:[Object(qe.jsxs)("div",{className:"modal__users-admin-header",children:[Object(qe.jsx)("div",{className:"modal__users-admin-header-title",children:"Administradores"}),Object(qe.jsxs)("div",{className:"modal__users-admin-header-search",children:[Object(qe.jsx)("i",{class:"fas fa-search"}),Object(qe.jsx)("input",{type:"text"})]})]}),Object(qe.jsx)("div",{className:"modal__users-admin-body",children:"list-item"}),Object(qe.jsx)("div",{className:"modal__users-admin-btn",children:Object(qe.jsx)("button",{className:"modal__users-admin-btn-opt",onClick:je,children:"Listo"})})]})}),Object(qe.jsx)(rt.a,{isOpen:_,onRequestClose:me,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"modal__chat-images",children:[Object(qe.jsx)("div",{className:"modal__chat-images-heard",children:Object(qe.jsx)("div",{className:"modal__chat-images-heard-title",children:"Imagenes"})}),Object(qe.jsx)("div",{className:"modal__chat-images-body",children:Object(qe.jsx)("div",{className:"modal__chat-images-body-list",children:re.map((function(e,t){return Object(qe.jsx)("div",{className:"modal__chat-images-body-list-item",children:Object(qe.jsx)("img",{src:e.message})})}))})})]})}),Object(qe.jsx)(rt.a,{isOpen:S,onRequestClose:me,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"modal__chat-images",children:[Object(qe.jsx)("div",{className:"modal__chat-images-heard",children:Object(qe.jsx)("div",{className:"modal__chat-images-heard-title",children:"Videos"})}),Object(qe.jsx)("div",{className:"modal__chat-images-body",children:Object(qe.jsx)("div",{className:"modal__chat-images-body-list",children:ne.map((function(e,t){return Object(qe.jsx)("div",{className:"modal__chat-images-body-list-item",children:Object(qe.jsx)(pt.a,{url:e.message,width:"100%",height:"100%",controls:!0,pip:!0,volume:"0.8"})})}))})})]})}),Object(qe.jsx)(rt.a,{isOpen:P,onRequestClose:me,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("div",{className:"modal__chat-members",children:[Object(qe.jsx)("div",{className:"modal__chat-members-heard",children:Object(qe.jsx)("div",{className:"modal__chat-members-heard-title",children:"Participantes"})}),Object(qe.jsxs)("div",{className:"modal__chat-images-body",children:[Object(qe.jsx)("dvi",{className:"modal__chat-members-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar",onChange:he,value:Y})}),Object(qe.jsx)("div",{className:"modal__chat-images-body-list",children:Oe.map((function(e){return!se.admin.includes(e.idusuario)&&Object(qe.jsxs)("div",{className:"modal__chat-members-body-list-item",children:[Object(qe.jsx)("div",{className:"modal__chat-members-body-list-item-left",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsx)("div",{className:"modal__chat-members-body-list-item-center",children:Object(qe.jsxs)("div",{className:"modal__chat-members-body-list-item-center-name",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{})," ",e.apellidoPaterno," ",e.apellidoMaterno]})}),se.admin.includes(de)&&Object(qe.jsx)("div",{className:"modal__chat-members-body-list-item-right",children:Object(qe.jsx)("span",{className:"modal__chat-members-body-list-item-right-opt",style:{color:"red"},onClick:function(){xe(e)},children:Object(qe.jsx)("i",{class:"fas fa-user-times"})})})]})}))})]})]})}),Object(qe.jsx)(rt.a,{isOpen:U,onRequestClose:me,style:Wa,closeTimeoutMS:1,children:Object(qe.jsxs)("form",{className:"modal__chat-members-add",onSubmit:ve,children:[Object(qe.jsx)("div",{className:"modal__chat-members-heard",children:Object(qe.jsx)("div",{className:"modal__chat-members-heard-title",children:"A\xf1adir miembros"})}),Object(qe.jsxs)("div",{className:"modal__chat-members-body",children:[Object(qe.jsx)("div",{className:"chat__userlected",children:H.map((function(e,t){return Object(qe.jsxs)("div",{className:"chat__userlected-item",onClick:function(){pe(t,e)},children:[Object(qe.jsx)("img",{src:e.imgusuario}),Object(qe.jsxs)("div",{children:[e.name," ",t]})]},t)}))}),Object(qe.jsx)("dvi",{className:"modal__chat-members-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar",onChange:he,value:Y})}),Object(qe.jsx)("div",{className:"modal__chat-members-body-list",children:fe.map((function(e){return Object(qe.jsxs)("div",{className:"modal__chat-members-body-list-item",onClick:function(){!function(e){G([].concat(Object(pa.a)(H),[e])),console.log(e);for(var t=0;t<$.length;t++)$[t].id===e.id&&$.splice(t,1)}(e)},children:[Object(qe.jsx)("div",{className:"modal__chat-members-body-list-item-left",children:Object(qe.jsx)("img",{src:e.imgusuario})}),Object(qe.jsx)("div",{className:"modal__chat-members-body-list-item-center",children:Object(qe.jsxs)("div",{className:"modal__chat-members-body-list-item-center-name",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{})," ",e.apellidoPaterno," ",e.apellidoMaterno]})})]})}))})]}),Object(qe.jsxs)("div",{className:"modal__chat-members-bottom",children:[Object(qe.jsx)("div",{className:"modal__chat-members-bottom-btn",children:Object(qe.jsx)("button",{children:"Cancelar"})}),Object(qe.jsx)("div",{className:"modal__chat-members-bottom-btn",children:Object(qe.jsx)("button",{type:"submit",children:"A\xf1adir"})})]})]})})]}),"personal"!==se.tipo&&Object(qe.jsxs)("div",{className:"chat__info-body-users",children:[Object(qe.jsxs)("div",{className:"chat__info-body-users-title",children:[Object(qe.jsxs)("div",{className:"chat__info-body-users-title-left",children:[Object(qe.jsx)("i",{class:"fas fa-user-friends"})," ",se.members.length," Participantes"]}),Object(qe.jsxs)("div",{className:"chat__info-body-users-title-right",children:[Object(qe.jsx)("i",{class:"fas fa-search",onClick:function(){A(!0)}}),se.admin.includes(de)&&Object(qe.jsx)("i",{class:"fas fa-user-plus",onClick:function(){J(!0)}})]})]}),Object(qe.jsxs)("div",{className:"chat__info-body-users-list",children:[oe.slice(0,ae).map((function(e,t){return Object(qe.jsxs)("div",{className:"chat__info-body-users-list-item",children:[Object(qe.jsxs)("div",{className:"chat__info-body-users-list-item-photo",children:[Object(qe.jsx)("img",{src:e.imgusuario}),!0===e.online&&Object(qe.jsx)("span",{className:"chat__info-body-users-list-item-photo-online"})]}),Object(qe.jsxs)("div",{className:"chat__info-body-users-list-item-info",children:[Object(qe.jsxs)("div",{className:"chat__info-body-users-list-item-info-nombre",children:[e.name," ",e.segundoNombre," ",Object(qe.jsx)("br",{}),e.apellidoPaterno," ",e.apellidoMaterno]}),e.admin.includes(e.idusuario)&&Object(qe.jsx)("span",{children:"Administrador"})]})]})})),oe.length>=7&&(oe.length<=ae?Object(qe.jsx)("div",{className:"btn__show-more",onClick:function(){ce(6)},children:"Ocultar datos"}):Object(qe.jsx)("div",{className:"btn__show-more",onClick:function(){ce((function(e){return e+10}))},children:"Mostrar mas..."}))]})]})]})]})},Za=function(){Object(r.b)();var e=Object(r.c)((function(e){return e.chat})).chatActivo,t=Object(r.c)((function(e){return e.infoChat})).infoChat;return Object(qe.jsxs)("div",{className:"main__home",children:[Object(qe.jsxs)("div",{className:"chat__left",children:[Object(qe.jsx)(Ua,{}),Object(qe.jsx)(Ya,{})]}),e?Object(qe.jsxs)("div",{className:"chat__right",children:[Object(qe.jsx)(Ja,{}),Object(qe.jsx)(qa,{}),Object(qe.jsx)(Ba,{})]}):Object(qe.jsxs)("div",{className:"chat__right",children:[Object(qe.jsx)("div",{className:"chat__right-noactive",children:"Seleccione un chat"}),Object(qe.jsx)("p",{children:"Para comenzar una conversaci\xf3n"})]}),Object(qe.jsx)("div",{children:t&&Object(qe.jsx)(Xa,{})})]})},$a=a(83),Qa=a.n($a),ec=a(319),tc=a.n(ec),ac=vt()().minutes(0).seconds(0).add(1,"hours").clone().add(1,"hours"),cc={name:"",rut:"",segundoNombre:"",apellidoPaterno:"",apellidoMaterno:"",area:"",cargo:"",fono:"",nacimiento:ac.toDate(),rol:"",email:"",imgusuario:"",emailp:"",permisos:[],password:"",stepActual:1},sc={nameFile:""},nc=function(){var e=Object(r.c)((function(e){return e.users})).activeUser,t=(Object(r.c)((function(e){return e.auth})),Object(r.b)()),a=Object(c.useState)(cc),s=Object(o.a)(a,2),n=s[0],i=s[1];Object(c.useEffect)((function(){e?(i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:1})),i(e)):i(cc)}),[e,i]);var l=Object(c.useState)(!0),d=Object(o.a)(l,2),b=(d[0],d[1]),m=n.name,h=n.rut,O=n.segundoNombre,f=n.apellidoPaterno,x=n.apellidoMaterno,v=n.area,y=n.cargo,g=n.fono,N=(n.nacimiento,n.rol),_=n.email,C=n.emailp,k=(n.permisos,n.password),w=n.stepActual,S=void 0===w?1:w,E=function(t){if("anterior"==t)2==S&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S-1})),3==S&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S-1})),4==S&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S-1}));else if("siguiente"==t){if(1==S){if(0==tc()(n.rut)&&!e)return Ne.a.fire("Error","El rut es incorrecto","error");if(""==n.name&&!e)return Ne.a.fire("Error","El nombre es obligatorio","error");if(""==n.apellidoPaterno&&!e)return Ne.a.fire("Error","El apellido paterno es obligatorio","error");i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S+1}))}if(2==S){if(console.log(S),""==n.emailp&&!e)return Ne.a.fire("Error","El email personal es obligatorio","error");if(""==n.email&&!e)return Ne.a.fire("Error","El email corporativo es obligatorio","error");if(""==n.fono&&!e)return Ne.a.fire("Error","El n\xfamero telefonico es obligatorio","error");i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S+1}))}if(3==S&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{stepActual:S+1})),4==S){if(""==n.area&&!e)return Ne.a.fire("Error","El \xe1rea es obligatoria","error");if(""==n.cargo&&!e)return Ne.a.fire("Error","El cargo es obligatorio","error")}}},M=Object(c.useState)(""),D=Object(o.a)(M,2),P=D[0],A=D[1];Object(c.useEffect)((function(){P&&(n.imgusuario=P)}),[P]),sc.nameFile=P.name;var T=Object(c.useState)(ac.toDate()),R=Object(o.a)(T,2),Y=R[0],F=R[1],I=function(e){var t=e.target;i(Object(Ze.a)(Object(Ze.a)({},n),{},Object(Xe.a)({},t.name,t.value)))};return Object(qe.jsx)("div",{className:"main__home",children:Object(qe.jsxs)("form",{className:"contenedor-usuario-ysm",onSubmit:function(a){a.preventDefault(),console.log("FormValues",n);var c,s=new FormData;s.set("rut",n.rut),s.set("segundoNombre",n.segundoNombre),s.set("apellidoPaterno",n.apellidoPaterno),s.set("apellidoMaterno",n.apellidoMaterno),s.set("area",n.area),s.set("cargo",n.cargo),s.set("fono",n.fono),s.set("nacimiento",n.nacimiento),s.set("rol",n.rol),s.set("email",n.email),s.set("emailp",n.emailp),s.set("imgusuario",n.imgusuario),s.set("name",n.name),s.set("permisos",n.permisos),e?(s.set("id",e.id),s.set("password",n.password),t(Gt(s))):t((c=s,function(){var e=Object(j.a)(u.a.mark((function e(t,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("user",c,"POST");case 3:return s=e.sent,e.next=6,JSON.stringify(s.data.usuarios);case 6:e.sent.ok?(t(qt(c)),Ne.a.fire("Usuario creado","","success")):Ne.a.fire("Hubo un error contacte con el administrador","","error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}())),b(!0)},children:[Object(qe.jsx)("div",{class:"header-usuario-ysm",children:Object(qe.jsx)("div",{className:"titulo-usuario-ysm",children:e?"Editar usuario":"Nuevo usuario"})}),1==S?Object(qe.jsxs)("div",{class:"body-usuario-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm 1",type:"text",id:"rut",name:"rut",onChange:I,value:h,placeholder:"Ingrese su RUT..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm 2",type:"text",id:"nombre",name:"name",onChange:I,value:m,placeholder:"Ingrese su nombre..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm 3",type:"text",id:"segundoNombre",name:"segundoNombre",onChange:I,value:O,placeholder:"Ingrese su segundo nombre..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm 4",type:"text",id:"apellidoPaterno",name:"apellidoPaterno",onChange:I,value:f,placeholder:"Ingrese su apellido paterno..."})})]}):2==S?Object(qe.jsxs)("div",{class:"body-usuario-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"text",id:"apellidoMaterno",name:"apellidoMaterno",onChange:I,value:x,placeholder:"Ingrese su apellido materno..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"text",id:"emailp",name:"emailp",onChange:I,value:C,placeholder:"Ingrese su email personal..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"text",id:"email",name:"email",onChange:I,value:_,placeholder:"Ingrese su email corporativo..."})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"text",id:"fono",name:"fono",onChange:I,value:g,placeholder:"Ingrese su fono..."})})]}):3==S?Object(qe.jsxs)("div",{class:"body-usuario-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)(Qa.a,{onChange:function(e){F(e),i(Object(Ze.a)(Object(Ze.a)({},n),{},{nacimiento:e}))},value:Y,className:"input-usuario-ysm"})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{type:"file",class:"input-usuario-ysm",name:"file",id:"customFile",onChange:function(e){if(e.target.files){A(e.target.files[0]);e.target.files[0]}},accept:".img,.png,.jpg,.jepg"})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{type:"text",className:"input-usuario-ysm",value:"Hoy",placeholder:"Hoy",disabled:!0})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"text",name:"empresa",value:"Reilak",placeholder:"Reilak",disabled:!0})})]}):4==S?Object(qe.jsxs)("div",{class:"body-usuario-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsxs)("select",{className:"input-usuario-ysm",name:"rol",onChange:function(e){var t=e.target;"Colaborador"==t.value&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{permisos:["Publicaciones"],rol:t.value})),"Jefatura"==t.value&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{permisos:["Eventos"],rol:t.value})),"Administrador"==t.value&&i(Object(Ze.a)(Object(Ze.a)({},n),{},{permisos:["Publicaciones","Eventos"],rol:t.value}))},children:["Colaborador"==N?Object(qe.jsx)("option",{value:"Colaborador",selected:!0,children:"Colaborador"}):Object(qe.jsx)("option",{value:"Colaborador",children:"Colaborador"}),Object(qe.jsx)("option",{value:"Jefatura",children:"Jefatura"}),"Jefatura"==N?Object(qe.jsx)("option",{value:"Jefatura",selected:!0,children:"Jefatura"}):Object(qe.jsx)("option",{value:"Jefatura",children:"Jefatura"}),"Administrador"==N?Object(qe.jsx)("option",{value:"Administrador",selected:!0,children:"Administrador"}):Object(qe.jsx)("option",{value:"Administrador",children:"Administrador"})]})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsxs)("select",{className:"input-usuario-ysm",onChange:I,name:"area",children:["Recursos humanos"==v?Object(qe.jsx)("option",{value:"Recursos humanos",selected:!0,children:"Recursos humanos"}):Object(qe.jsx)("option",{value:"Recursos humanos",children:"Recursos humanos"}),"Finanzas"==v?Object(qe.jsx)("option",{value:"Finanzas",selected:!0,children:"Finanzas"}):Object(qe.jsx)("option",{value:"Finanzas",children:"Finanzas"}),"Marketing"==v?Object(qe.jsx)("option",{value:"Marketing",selected:!0,children:"Marketing"}):Object(qe.jsx)("option",{value:"Marketing",children:"Marketing"})]})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsxs)("select",{className:"input-usuario-ysm",name:"cargo",onChange:I,children:["Administrativo Credito"==y?Object(qe.jsx)("option",{value:"Administrativo Credito",selected:!0,children:"Administrativo Credito"}):Object(qe.jsx)("option",{value:"Administrativo Credito",children:"Administrativo Credito"}),"Gerente Administrativo"==y?Object(qe.jsx)("option",{value:"Gerente Administrativo",selected:!0,children:"Gerente Administrativo"}):Object(qe.jsx)("option",{value:"Gerente Administrativo",children:"Gerente Administrativo"}),"Jefe de control de calidad"==y?Object(qe.jsx)("option",{value:"Jefe de control de calidad",selected:!0,children:"Jefe de control de calidad"}):Object(qe.jsx)("option",{value:"Jefe de control de calidad",children:"Jefe de control de calidad"})]})}),Object(qe.jsx)("div",{className:"input-contenedor-usuario-ysm",children:Object(qe.jsx)("input",{className:"input-usuario-ysm",type:"password",name:"password",value:k,onChange:I,placeholder:"Ingrese su contrase\xf1a..."})})]}):"",Object(qe.jsxs)("div",{className:"stepbtn-usuario-ysm",children:[Object(qe.jsx)("div",{className:"izquierda-stepbtn-ysm",children:1==S?Object(qe.jsx)("i",{class:"fas fa-arrow-left fa-2x flecha-izquierda-icono-inactivo"}):Object(qe.jsx)("i",{class:"fas fa-arrow-left fa-2x flecha-izquierda-icono",onClick:function(){E("anterior")}})}),Object(qe.jsx)("div",{className:"submitpbtn-usuario-ysm",children:4==S?Object(qe.jsx)("button",{type:"submit",class:"button button2",children:Object(qe.jsx)("span",{children:e?"Editar usuario":"Nuevo usuario"})}):""}),Object(qe.jsx)("div",{className:"derecha-stepbtn-ysm",children:4==S?Object(qe.jsx)("i",{class:"fas fa-check fa-2x flecha-derecha-icono-inactivo"}):Object(qe.jsx)("i",{class:"fas fa-arrow-right fa-2x flecha-derecha-icono",onClick:function(){E("siguiente")}})})]})]})})},rc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"#242526"},overlay:{transition:"opacity .2s ease-in-out",backgroundColor:"rgba(53, 5, 5, 0.3)"}},oc=vt()().minutes(0).seconds(0).add(1,"hours"),ic=oc.clone().add(1,"hours"),lc={titulo:"",descripcion:"",tipo:"",usuariosevent:[],start:oc.toDate(),end:ic.toDate(),stepActual:1,eleccion:"",radio:"Presencial",link:""},dc=function(){var e=Object(r.b)(),t=Object(c.useState)(lc),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(r.c)((function(e){return e.auth})).uid,l=Object(r.c)((function(e){return e.ui})).modalOpen,d=Object(r.c)((function(e){return e.users})).users,b=Object(r.c)((function(e){return e.events})),m=b.events,h=b.activeEvents,O=Object(c.useState)(!0),f=Object(o.a)(O,2),x=(f[0],f[1]);Object(c.useEffect)((function(){e(Bt())}),[e]);var v=Object(c.useState)([]),y=Object(o.a)(v,2),g=y[0],N=y[1],_=Object(c.useState)([]),C=Object(o.a)(_,2),k=C[0],w=C[1];Object(c.useEffect)((function(){w(d.filter((function(e){return e.id!==i})))}),[]);var S=s.stepActual,E=void 0===S?1:S,M=s.eleccion,D=s.titulo,P=s.descripcion,A=s.start,T=s.end,R=s.tipo;s.usuariosevent,s.radio,s.link;Object(c.useEffect)((function(){h?(n({stepActual:2,eleccion:"Evento"}),n(h)):n(lc)}),[m,n]);var Y=function(t){t.preventDefault();var a=vt()(A),c=vt()(T);if(a.isSameOrAfter(c))return Ne.a.fire("Error","La fecha fin debe de ser mayor a la fecha de inicio","error");if(""==s.titulo)return Ne.a.fire("Error","El titulo es obligatorio","error");if(""==s.descripcion)return Ne.a.fire("Error","La descripcion es obligatoria","error");s.usuariosevent=[];var n,r=new FormData;r.set("titulo",s.titulo),r.set("descripcion",s.descripcion),r.set("start",s.start),r.set("end",s.end),r.set("tipo",s.tipo),console.log("userSelect",g),g.forEach((function(e){return console.log(e.id)})),g.forEach((function(e){return s.usuariosevent.push(e.id)})),r.set("reunion",s.usuariosevent),r.set("link",s.link),console.log(s.usuariosevent),h?(console.log(h.id),r.set("id",h.id),e((n=r,function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("event/".concat(n.id),n,"PUT");case 3:return a=e.sent,console.log(a),e.next=7,JSON.stringify(a.data.ok);case 7:(c=e.sent)?(Ne.a.fire("Evento Editado","","success"),t(Pt(n)),t(Ft())):Ne.a.fire("Error",c.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),e(lt())):(e(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(a,c){var s,n,r,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=c().auth,n=s.uid,r=s.name,t.prev=1,t.next=4,p("event",e,"POST");case 4:return o=t.sent,console.log(o),t.next=8,JSON.stringify(o.data.eventos);case 8:(i=t.sent).ok?(e.id=i.eid,e.user={_id:n,name:r},a(Et(e)),a(Rt()),Ne.a.fire("Evento creado","","success")):Ne.a.fire("Hubo un error contacte con el administrador","","error"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}()}(r)),e(lt())),x(!0)},F=function(e){var t=e.target;console.log("llegue aqui"),n(Object(Ze.a)(Object(Ze.a)({},s),{},Object(Xe.a)({},t.name,t.value)))},I=function(e){("Evento"==e||"Reunion"==e)&&n(Object(Ze.a)(Object(Ze.a)({},s),{},{tipo:e,stepActual:E+1,eleccion:e}))},L=Object(c.useState)(oc.toDate()),U=Object(o.a)(L,2),J=U[0],q=U[1],z=Object(c.useState)(ic.toDate()),H=Object(o.a)(z,2),G=H[0],V=H[1],B=function(e){q(e),n(Object(Ze.a)(Object(Ze.a)({},s),{},{start:e}))},W=function(e){V(e),n(Object(Ze.a)(Object(Ze.a)({},s),{},{end:e}))},K=function(){e(lt())},X=function(){e(Dt())};return Object(qe.jsx)("div",{className:"contenedor-crud-eventos-ysm",children:1==E&&""==M?Object(qe.jsxs)("form",{className:"form-eventos",onSubmit:Y,children:[Object(qe.jsx)("div",{className:"header-crud-eventos-ysm",children:Object(qe.jsx)("div",{className:"titulo-crud-eventos-ysm",children:"Eleccion"})}),Object(qe.jsxs)("div",{className:"body-crud-eventos-ysm",children:[Object(qe.jsx)("div",{class:"espacios-body-eventos-ysm"}),Object(qe.jsxs)("div",{class:"contenedor-card-eleccion-ysm",children:[Object(qe.jsxs)("div",{class:"card card1-eleccion-ysm",children:[Object(qe.jsx)("div",{class:"titulo-eleccion-ysm",children:Object(qe.jsx)("b",{children:"Evento"})}),Object(qe.jsx)("div",{class:"icono-eleccion-ysm",children:Object(qe.jsx)("i",{class:"fas fa-arrow-right fa-2x flecha-derecha-icono",onClick:function(){I("Evento")}})})]}),Object(qe.jsxs)("div",{class:"card card2-eleccion-ysm",children:[Object(qe.jsx)("div",{class:"titulo-eleccion-ysm",children:Object(qe.jsx)("b",{children:"Reuni\xf3n"})}),Object(qe.jsx)("div",{class:"icono-eleccion-ysm",children:Object(qe.jsx)("i",{class:"fas fa-arrow-right fa-2x flecha-derecha-icono",onClick:function(){I("Reunion")}})})]})]}),Object(qe.jsx)("div",{class:"espacios-body-eventos-ysm"})]})]}):2==E&&"Evento"==M||null!=h&&"Evento"==h.tipo?Object(qe.jsxs)("form",{className:"form-eventos",onSubmit:Y,children:[Object(qe.jsxs)("div",{className:"header-crud-eventos-ysm",children:[Object(qe.jsx)(Ge.b,{to:"/eventos",children:Object(qe.jsx)("div",{className:"volver-crud-eventos-ysm",onClick:X,children:Object(qe.jsx)("i",{class:"fas fa-arrow-left fa-2x"})})}),Object(qe.jsx)("div",{className:"titulo-crud-eventos-ysm",children:h?"Editar evento":"Nuevo evento"})]}),Object(qe.jsxs)("div",{className:"body-crud-eventos-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)("input",{className:"input-eventos-ysm",type:"text",name:"titulo",value:D,onChange:F,placeholder:"Ingrese un t\xedtulo..."})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)("input",{className:"input-eventos-ysm",type:"text",name:"descripcion",value:P,onChange:F,placeholder:"Ingrese una descripci\xf3n..."})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)(Qa.a,{onChange:B,value:J,className:"input-eventos-ysm"})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)(Qa.a,{onChange:W,value:G,minDate:J,className:"input-eventos-ysm"})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)("button",{class:"button button2",children:h?"Editar evento":"Nuevo evento"})})]})]}):2==E&&"Reunion"==M||null!=h&&"Reunion"==R?Object(qe.jsxs)("form",{className:"form-eventos",onSubmit:Y,children:[Object(qe.jsxs)("div",{className:"header-crud-eventos-ysm",children:[Object(qe.jsx)(Ge.b,{to:"/eventos",children:Object(qe.jsx)("div",{className:"volver-crud-eventos-ysm",onClick:X,children:Object(qe.jsx)("i",{class:"fas fa-arrow-left fa-2x"})})}),Object(qe.jsx)("div",{className:"titulo-crud-eventos-ysm",children:h?"Editar reuni\xf3n":"Nueva reuni\xf3n"})]}),Object(qe.jsxs)("div",{className:"body-crud-eventos-ysm",children:[Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)("input",{className:"input-eventos-ysm",type:"text",name:"titulo",value:D,onChange:F,placeholder:"Ingrese un t\xedtulo..."})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)("input",{className:"input-eventos-ysm",type:"text",name:"descripcion",value:P,onChange:F,placeholder:"Ingrese una descripci\xf3n..."})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)(Qa.a,{onChange:B,value:J,className:"input-eventos-ysm"})}),Object(qe.jsx)("div",{className:"input-contenedor-eventos-ysm",children:Object(qe.jsx)(Qa.a,{onChange:W,value:G,minDate:J,className:"input-eventos-ysm "})}),Object(qe.jsx)("div",{className:"inputreunion-contenedor-eventos-ysm",children:Object(qe.jsx)("div",{class:"button button2",onClick:function(){e(it())},children:h?"Continuar":"Nueva reuni\xf3n"})})]}),Object(qe.jsx)(rt.a,{isOpen:l,onRequestClose:K,style:rc,closeTimeoutMS:1,children:Object(qe.jsxs)("form",{className:"createcanal__modal",onSubmit:Y,children:[Object(qe.jsx)("div",{className:"createcanal__modal-header",children:"A\xf1adir miembros"}),Object(qe.jsxs)("div",{className:"createcanal__modal-body",children:[Object(qe.jsx)("div",{className:"chat__userlected",children:g.map((function(e,t){var a=e.name,c=e.segundoNombre,s=e.apellidoPaterno,n=e.apellidoMaterno,r=e.imgusuario,o=e.id;return Object(qe.jsxs)("div",{className:"chat__userlected-item",onClick:function(){!function(e,t,a,c,s,n,r){w([].concat(Object(pa.a)(k),[{id:t,name:a,segundoNombre:c,apellidoPaterno:s,apellidoMaterno:n,imgusuario:r}])),g.splice(e,1)}(t,o,a,c,s,n,r)},children:[Object(qe.jsx)("img",{src:r}),Object(qe.jsx)("div",{children:a})]},t)}))}),Object(qe.jsx)("div",{className:"createcanal__modal-body-search",children:Object(qe.jsx)("input",{type:"text",placeholder:"Buscar"})}),Object(qe.jsx)("div",{className:"createcanal__modal-body-users",children:k.map((function(e,t){var a=e.name,c=e.segundoNombre,s=e.apellidoPaterno,n=e.apellidoMaterno,r=e.imgusuario,o=e.id;return Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item",onClick:function(){!function(e,t,a,c,s,n,r){N([].concat(Object(pa.a)(g),[{id:t,name:a,segundoNombre:c,apellidoPaterno:s,apellidoMaterno:n,imgusuario:r}])),console.log(g),console.log(d),k.splice(e,1)}(t,o,a,c,s,n,r)},children:[Object(qe.jsx)("div",{className:"contenedor__iniciar-chat-body-item-left",children:Object(qe.jsx)("img",{src:r})}),Object(qe.jsxs)("div",{className:"contenedor__iniciar-chat-body-item-right",children:[a," ",c," ",Object(qe.jsx)("br",{}),s," ",n]})]},t)}))})]}),Object(qe.jsxs)("div",{className:"creategrupo__modal-footer",children:[Object(qe.jsx)("button",{className:"birthday__modal-btn",type:"button",onClick:K,children:"Cancelar"}),Object(qe.jsx)("button",{type:"submit",className:"birthday__modal-btn",children:"Crear"})]})]})})]}):""})},uc=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(Rt())}),[e]);var t=Object(r.c)((function(e){return e.events})).events;return Object(qe.jsxs)("div",{className:"contenedor-lista-eventos-ysm",children:[Object(qe.jsx)("div",{className:"header-crud-eventos-ysm",children:Object(qe.jsx)("div",{className:"titulo-listas-crud-eventos-ysm",children:"Lista Eventos"})}),Object(qe.jsx)("div",{className:"body-listaeventos-eventos-ysm",children:t.map((function(t,a){var c=t.titulo,s=t.id,n=t.descripcion,r=t.start,o=t.end,i=t.tipo;return"Evento"==i?Object(qe.jsx)("div",{className:"contenedor-card-listaeventos-eventos-ysm",children:Object(qe.jsxs)("div",{class:"card card-eventos-ysm",children:[Object(qe.jsx)("div",{class:"header-card-eventos-ysm estilo-x",children:c}),Object(qe.jsx)("div",{class:"body-card-eventos-ysm",children:n}),Object(qe.jsxs)("div",{class:"footer-card-eventos-ysm ",children:[Object(qe.jsx)("div",{class:"izquierda-footer-card-eventos-ysm ",children:Object(qe.jsx)("i",{className:"fas fa-trash iconos-lu iconos-eventos-ysm",onClick:function(){!function(t){e(At(t))}(s)}})}),Object(qe.jsxs)("div",{class:"mitad-footer-card-eventos-ysm ",children:[Object(qe.jsx)("div",{class:"fechainicio-mitad-footer-eventos-ysm estilo-x ",children:vt()(r).format("DD-MM-yy")}),Object(qe.jsx)("div",{class:"fechafin-footer-card-eventos-ysm estilo-x ",children:vt()(o).format("DD-MM-yy")})]}),Object(qe.jsx)("div",{class:"derecha-footer-card-eventos-ysm ",children:Object(qe.jsx)(Ge.b,{to:"/eventos",children:Object(qe.jsx)("i",{className:"fas fa-pencil-alt iconos-lu iconos-eventos-ysm",onClick:function(){!function(t,a,c,s,n,r){var o={titulo:t,id:a,descripcion:c,start:s,end:n,tipo:r};console.log("prueba",o),e(Mt(o))}(c,s,n,r,o,i)}})})})]})]})}):""}))})]})},jc=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(Rt())}),[e]);var t=Object(r.c)((function(e){return e.events})).events;return Object(qe.jsxs)("div",{className:"contenedor-lista-eventos-ysm",children:[Object(qe.jsx)("div",{className:"header-crud-eventos-ysm",children:Object(qe.jsx)("div",{className:"titulo-listas-crud-eventos-ysm",children:"Lista Reuniones"})}),Object(qe.jsx)("div",{className:"body-listaeventos-eventos-ysm",children:t.map((function(a,c){var s=a.titulo,n=a.tipo,r=a.id,o=a.descripcion,i=a.start,l=a.end;return"Reunion"==n?Object(qe.jsx)("div",{className:"contenedor-card-listaeventos-eventos-ysm",children:Object(qe.jsxs)("div",{class:"card card-eventos-ysm",children:[Object(qe.jsx)("div",{class:"header-card-eventos-ysm estilo-x",children:s}),Object(qe.jsx)("div",{class:"body-card-eventos-ysm",children:o}),Object(qe.jsxs)("div",{class:"footer-card-eventos-ysm ",children:[Object(qe.jsx)("div",{class:"izquierda-footer-card-eventos-ysm ",children:Object(qe.jsx)("i",{className:"fas fa-trash iconos-lu iconos-eventos-ysm",onClick:function(){!function(t){e(At(t))}(r)}})}),Object(qe.jsxs)("div",{class:"mitad-footer-card-eventos-ysm ",children:[Object(qe.jsx)("div",{class:"fechainicio-mitad-footer-eventos-ysm estilo-x",children:vt()(i).format("DD-MM-yy")}),Object(qe.jsx)("div",{class:"fechafin-footer-card-eventos-ysm estilo-x",children:vt()(l).format("DD-MM-yy")})]}),Object(qe.jsx)("div",{class:"derecha-footer-card-eventos-ysm ",children:Object(qe.jsx)(Ge.b,{to:"/eventos",children:Object(qe.jsx)("i",{className:"fas fa-pencil-alt iconos-lu iconos-eventos-ysm",onClick:function(){!function(t,a,c,s,n,r){e(Mt({titulo:t,id:a,descripcion:c,start:s,end:n,tipo:r}))}(s,r,o,i,l,n)}})})})]})]})}):"Reunion"!=n?"":0==t.length?Object(qe.jsx)("div",{className:"contenedor-card-listaeventos-eventos-ysm",children:Object(qe.jsx)("i",{class:"far fa-calendar-times icono-lu"})}):""}))})]})},bc=function(){return Object(qe.jsxs)("div",{className:"main__home",children:[Object(qe.jsx)(dc,{}),Object(qe.jsx)(uc,{}),Object(qe.jsx)(jc,{})]})},mc=function(e){return{type:Oe,payload:e}},hc=function(){return function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("dashboard/usersonline/");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.usuario,t(Oc(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Oc=function(e){return{type:fe,payload:e}},fc=function(e){return{type:pe,payload:e}},pc=function(e){return{type:xe,payload:e}},xc=function(e){return{type:ve,payload:e}},vc=function(e){return{type:ye,payload:e}},yc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},gc=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("dashboard/userscount/");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,s=c.usuario,console.log(s.length),console.log(s),t(mc(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),e(hc()),e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s,n,r,o,i,l,d,j,b,m,h,O,p,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vt()().isoWeekday(),c=a-1,s=vt()(),n=s.subtract(c,"days"),r=n._d,o=new Date(r),i=vt()(o).format("yy-MM-DD"),l=vt()("2021-07-30"),d=vt()().isoWeekday(),j=7-d,b=l.add(j,"days"),m=b._d,h=new Date(m),vt()(h).format("yy-MM-DD"),e.prev=13,e.next=16,f("dashboard/potw/".concat(i),i);case 16:return O=e.sent,e.next=19,O.json();case 19:p=e.sent,x=p.usuario,t(pc(x)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s,n,r,o,i,l,d,j,b,m,h,O,p,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vt()().isoWeekday(),c=a-1,s=vt()(),n=s.subtract(c,"days"),r=n._d,o=new Date(r),i=vt()(o).format("yy-MM-DD"),l=vt()("2021-07-30"),d=vt()().isoWeekday(),j=7-d,b=l.add(j,"days"),m=b._d,h=new Date(m),vt()(h).format("yy-MM-DD"),e.prev=13,e.next=16,f("dashboard/eotw/".concat(i),i);case 16:return O=e.sent,e.next=19,O.json();case 19:p=e.sent,x=p.usuario,t(xc(x)),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=Object(r.c)((function(e){return e.dashboard})),a=t.dashboard,s=t.usuariosonline,n=t.publicaionessemanales,i=t.eventossemanales,l=Object(c.useState)(!1),d=Object(o.a)(l,2),b=d[0],m=d[1],h=Object(c.useState)(!1),O=Object(o.a)(h,2),p=O[0],x=O[1],v=Object(c.useState)(!1),y=Object(o.a)(v,2),g=y[0],N=y[1],_=Object(c.useState)(!1),C=Object(o.a)(_,2),k=C[0],w=C[1],S=Object(c.useState)(""),E=Object(o.a)(S,2);E[0],E[1];return Object(qe.jsxs)("div",{className:"dashboard__content-heard",children:[Object(qe.jsxs)("div",{className:"dashboard__content-heard-card",children:[Object(qe.jsx)("div",{className:"dashboard__content-heard-card-icon",children:Object(qe.jsx)("i",{class:"fas fa-users fa-3x icono-dashboard-ysm ",onClick:function(){m(!0)}})}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-number",children:a.length}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-text",children:"Usuarios Registrados"})]}),Object(qe.jsxs)("div",{className:"dashboard__content-heard-card",children:[Object(qe.jsx)("div",{className:"dashboard__content-heard-card-icon",children:Object(qe.jsx)("i",{class:"fas fa-signal fa-3x icono-dashboard-ysm",onClick:function(){x(!0)}})}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-number",children:s.length}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-text",children:"Usuarios en linea"})]}),Object(qe.jsxs)("div",{className:"dashboard__content-heard-card",children:[Object(qe.jsx)("div",{className:"dashboard__content-heard-card-icon",children:Object(qe.jsx)("i",{class:"fas fa-cloud-upload-alt fa-3x icono-dashboard-ysm",onClick:function(){N(!0)}})}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-number",children:n.length}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-text",children:"Publicaciones esta semana"})]}),Object(qe.jsxs)("div",{className:"dashboard__content-heard-card",children:[Object(qe.jsx)("div",{className:"dashboard__content-heard-card-icon",children:Object(qe.jsx)("i",{class:"fas fa-calendar-alt fa-3x icono-dashboard-ysm",onClick:function(){w(!0)}})}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-number",children:i.length}),Object(qe.jsx)("div",{className:"dashboard__content-heard-card-text",children:"Eventos esta semana"})]}),Object(qe.jsxs)(rt.a,{isOpen:b,onRequestClose:function(){m(!1)},style:yc,closeTimeoutMS:200,className:"modal modal-header-dashboard-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-header-dashboard-ysm",children:Object(qe.jsx)("div",{className:"titulo-header-dashboard-ysm",children:"Usuarios Registrados"})}),Object(qe.jsxs)("div",{className:"subheader-header-dashboard-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-dashboard-ysm"}),Object(qe.jsx)("div",{className:"fechafin-subheader-dashboard-ysm"})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-dashboard-ysm ",children:Object(qe.jsxs)("table",{cellpadding:"0",cellspacing:"0",border:"0",children:[Object(qe.jsx)("thead",{className:"encabezado-tabla-dashboard-ysm",children:Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{width:"60px ",className:"th-centrado-ysm",children:"Foto"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Rut"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Nombre"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Segundo Nombre"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Apellido Paterno"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Apellido Materno"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Email Personal"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Email Corporativo"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Fono"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Nacimiento"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Rol"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Cargo"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"\xc1rea"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Ingreso"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Estado"})]})}),Object(qe.jsx)("tbody",{children:a.map((function(e,t){var a=e.imgusuario,c=e.rut,s=e.nombre,n=e.segundoNombre,r=e.apellidoPaterno,o=e.apellidoMaterno,i=e.emailp,l=e.email,d=e.fono,u=e.nacimiento,j=e.rol,b=e.cargo,m=e.area,h=e.ingreso,O=e.estado;return Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("td",{className:"th-centrado-ysm",children:Object(qe.jsx)("img",{src:a,height:"20px",width:"20px",style:{borderRadius:"50%"}})}),Object(qe.jsxs)("td",{className:"th-centrado-ysm",children:[c," "]}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:s}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:n}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:r}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:o}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:i}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:l}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:d}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(u).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:j}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:b}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:m}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(h).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:O})]})}))})]})})]}),Object(qe.jsxs)(rt.a,{isOpen:p,onRequestClose:function(){x(!1)},style:yc,closeTimeoutMS:200,className:"modal modal-header-dashboard-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-header-dashboard-ysm",children:Object(qe.jsx)("div",{className:"titulo-header-dashboard-ysm",children:"Usuarios Online"})}),Object(qe.jsxs)("div",{className:"subheader-header-dashboard-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-dashboard-ysm"}),Object(qe.jsx)("div",{className:"fechafin-subheader-dashboard-ysm"})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-dashboard-ysm",children:Object(qe.jsxs)("table",{cellpadding:"0",cellspacing:"0",border:"0",children:[Object(qe.jsx)("thead",{className:"encabezado-tabla-dashboard-ysm",children:Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{width:"60px ",className:"th-centrado-ysm",children:"Foto"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Rut"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Nombre"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Segundo Nombre"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Apellido Paterno"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Apellido Materno"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Email Personal"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Email Corporativo"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Fono"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Nacimiento"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Rol"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Cargo"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"\xc1rea"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Ingreso"}),Object(qe.jsx)("th",{width:"100px",className:"th-centrado-ysm",children:"Estado"})]})}),Object(qe.jsx)("tbody",{children:s.map((function(e,t){var a=e.imgusuario,c=e.rut,s=e.nombre,n=e.segundoNombre,r=e.apellidoPaterno,o=e.apellidoMaterno,i=e.emailp,l=e.email,d=e.fono,u=e.nacimiento,j=e.rol,b=e.cargo,m=e.area,h=e.ingreso,O=e.estado;return Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("td",{className:"th-centrado-ysm",children:Object(qe.jsx)("img",{src:a,height:"20px",width:"20px",style:{borderRadius:"50%"}})}),Object(qe.jsxs)("td",{className:"th-centrado-ysm",children:[c," "]}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:s}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:n}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:r}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:o}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:i}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:l}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:d}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(u).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:j}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:b}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:m}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(h).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:O})]})}))})]})})]}),Object(qe.jsxs)(rt.a,{isOpen:g,onRequestClose:function(){N(!1)},style:yc,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-header-dashboard-ysm",children:Object(qe.jsx)("div",{className:"titulo-header-dashboard-ysm",children:"Publicaciones creadas en la semana"})}),Object(qe.jsxs)("div",{className:"subheader-header-dashboard-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-dashboard-ysm"}),Object(qe.jsx)("div",{className:"fechafin-subheader-dashboard-ysm"})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-dashboard-ysm",children:Object(qe.jsxs)("table",{cellpadding:"0",cellspacing:"0",border:"0",children:[Object(qe.jsx)("thead",{className:"encabezado-tabla-dashboard-ysm",children:Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Titulo"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Contenido"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Fecha"})]})}),Object(qe.jsx)("tbody",{children:n.map((function(e,t){var a=e.titulo,c=e.contenido,s=e.fecha;return Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("td",{className:"th-centrado-ysm",children:a}),Object(qe.jsx)("td",{className:"th-centrado-ysm",dangerouslySetInnerHTML:{__html:c}}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(s).format("DD-MM-YYYY")})]})}))})]})})]}),Object(qe.jsxs)(rt.a,{isOpen:k,onRequestClose:function(){w(!1)},style:yc,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-header-dashboard-ysm",children:Object(qe.jsx)("div",{className:"titulo-header-dashboard-ysm",children:"Eventos creados en la semana"})}),Object(qe.jsxs)("div",{className:"subheader-header-dashboard-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-dashboard-ysm"}),Object(qe.jsx)("div",{className:"fechafin-subheader-dashboard-ysm"})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-dashboard-ysm",children:Object(qe.jsxs)("table",{cellpadding:"0",cellspacing:"0",border:"0",children:[Object(qe.jsx)("thead",{className:"encabezado-tabla-dashboard-ysm",children:Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("th",{width:"200px",height:"50px",className:"th-centrado-ysm",children:"Titulo"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Descripcion"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Inicio"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Fin"}),Object(qe.jsx)("th",{width:"200px",className:"th-centrado-ysm",children:"Tipo"})]})}),Object(qe.jsx)("tbody",{children:i.map((function(e,t){var a=e.titulo,c=e.descripcion,s=e.start,n=e.end,r=e.tipo;return Object(qe.jsxs)("tr",{children:[Object(qe.jsx)("td",{className:"th-centrado-ysm",children:a}),Object(qe.jsxs)("td",{className:"th-centrado-ysm",children:[c," "]}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(s).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:vt()(n).format("DD-MM-YYYY")}),Object(qe.jsx)("td",{className:"th-centrado-ysm",children:r})]})}))})]})})]})]})},Nc=a(202),_c=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s,n,r,o,i,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vt()(),c=vt()().isoWeekday(),s=c-1,a=vt()(),n=a.subtract(s,"days"),r=n._d,o=new Date(r),i=vt()(o).format("yy-MM-DD"),console.log(i),console.log("Primer dia de la semana",a),e.prev=9,e.next=12,f("dashboard/usersotw/".concat(i),i);case 12:return l=e.sent,e.next=15,l.json();case 15:d=e.sent,j=d.usuario,t(fc(j)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[9,20]])})));return function(t){return e.apply(this,arguments)}}()),e(hc()),e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c,s,n,r,o,i,l,d,j,b,m,h,O,p,x,v,y,g,N,_,C,k,w,S,E,M,D,P,A,T,R,Y,F,I,L;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vt()().isoWeekday(),a=vt()(),c=new Date(a),s=vt()(c).format("yy-MM-DD"),n=vt()(s).subtract(1,"days"),r=vt()(s).subtract(2,"days"),o=vt()(s).subtract(3,"days"),i=vt()(s).subtract(4,"days"),l=vt()(s).subtract(5,"days"),d=vt()(s).subtract(6,"days"),j=vt()(n).format("yy-MM-DD"),b=vt()(r).format("yy-MM-DD"),m=vt()(o).format("yy-MM-DD"),h=vt()(i).format("yy-MM-DD"),O=vt()(l).format("yy-MM-DD"),p=vt()(d).format("yy-MM-DD"),e.prev=17,e.next=20,f("dashboard/conexionesdiarias/".concat(s),s);case 20:return x=e.sent,e.next=23,x.json();case 23:return v=e.sent,y=v.usuario1.length,e.next=27,f("dashboard/conexionesdiarias/".concat(j),j);case 27:return g=e.sent,e.next=30,g.json();case 30:return N=e.sent,_=N.usuario1.length,e.next=34,f("dashboard/conexionesdiarias/".concat(b),b);case 34:return C=e.sent,e.next=37,C.json();case 37:return k=e.sent,w=k.usuario1.length,e.next=41,f("dashboard/conexionesdiarias/".concat(m),m);case 41:return S=e.sent,e.next=44,S.json();case 44:return E=e.sent,M=E.usuario1.length,e.next=48,f("dashboard/conexionesdiarias/".concat(h),h);case 48:return D=e.sent,e.next=51,D.json();case 51:return P=e.sent,A=P.usuario1.length,e.next=55,f("dashboard/conexionesdiarias/".concat(O),O);case 55:return T=e.sent,e.next=58,T.json();case 58:return R=e.sent,Y=R.usuario1.length,e.next=62,f("dashboard/conexionesdiarias/".concat(p),p);case 62:return F=e.sent,e.next=65,F.json();case 65:I=e.sent,L=I.usuario1.length,t(vc({dia7:y,dia6:_,dia5:w,dia4:M,dia3:A,dia2:Y,dia1:L})),e.next=74;break;case 71:e.prev=71,e.t0=e.catch(17),console.log(e.t0);case 74:case"end":return e.stop()}}),e,null,[[17,71]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=vt()(),a=vt()(t).format("DD-MM-YYYY"),s=vt()(t).subtract(1,"days"),n=vt()(t).subtract(2,"days"),o=vt()(t).subtract(3,"days"),i=vt()(t).subtract(4,"days"),l=vt()(t).subtract(5,"days"),d=vt()(t).subtract(6,"days"),b=vt()(s).format("DD-MM-YYYY"),m=vt()(n).format("DD-MM-YYYY"),h=vt()(o).format("DD-MM-YYYY"),O=vt()(i).format("DD-MM-YYYY"),p=vt()(l).format("DD-MM-YYYY"),x=vt()(d).format("DD-MM-YYYY"),v=Object(r.c)((function(e){return e.dashboard})),y=v.dashboard,g=v.usuariosoffline,N=v.conexionesdiarias,_=y.length-g.length;return console.log("Usuarios Offline",N.dia1),Object(qe.jsxs)("div",{className:"dashboard__content-report",children:[Object(qe.jsx)("div",{className:"dashboard__content-repot-left",children:Object(qe.jsx)(Nc.a,{data:{labels:[x,p,O,h,m,b,a],datasets:[{label:"Conexiones",data:[N.dia1,N.dia2,N.dia3,N.dia4,N.dia5,N.dia6,N.dia7],backgroundColor:"red",color:"white"}]},options:{scales:{xAxes:[{labelString:"Dias",display:!0,fontColor:"white"}],yAxes:[{scales:{labelString:"Porcentaje",display:!0,fontColor:"white"},ticks:{beginAtZero:!0,fontColor:"white"}}]},layout:{padding:0},responsive:!0,maintainAspectRatio:!1}})}),Object(qe.jsx)("div",{className:"dashboard__content-repot-right",children:Object(qe.jsx)(Nc.b,{data:{labels:["Conectados de la semana","Desconectados de la semana"],datasets:[{label:"Conexiones",data:[g.length,_],backgroundColor:["green","orange"]}]},options:{layout:{padding:0},responsive:!0,maintainAspectRatio:!1}})})]})},Cc=a(95),kc=a.n(Cc);Object(Cc.createTheme)("solarized",{text:{primary:"#ffffff",secondary:"#ffffff"},background:{default:"#4a484d"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"#073642"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var wc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},Sc=vt()().minutes(0).seconds(0).add(1,"hours"),Ec=(Sc.clone().add(1,"hours"),{titulo:"",contenido:"",fecha:Sc.toDate(),multimedia:"",usuario:""}),Mc=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.post})),a=t.posts,s=t.activePost,n=Object(c.useState)(Ec),i=Object(o.a)(n,2),l=i[0],d=i[1],u=Object(c.useState)(!1),j=Object(o.a)(u,2),b=j[0],m=j[1],h=l.contenido,O=l.titulo,f=(l.multimedia,l.fecha);l.usuario;Object(c.useEffect)((function(){e(Se())}),[e]),Object(c.useEffect)((function(){d(s||Ec)}),[s,d]);return Object(qe.jsx)("div",{className:"dashboard__content-resume-left",children:Object(qe.jsxs)("div",{className:"dashboard__content-resume-left-list",children:[Object(qe.jsx)(kc.a,{title:"Publicaciones",columns:[{name:"Titulo",selector:"titulo"},{name:"Fecha",selector:"fecha"}],data:a,theme:"solarized",pagination:"true",paginationPerPage:3,onRowClicked:function(t){e(Ce(t)),m(!0)}}),Object(qe.jsxs)(rt.a,{isOpen:b,onRequestClose:function(){m(!1)},style:wc,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"titulo-calendarmodal-ysm",children:O})}),Object(qe.jsxs)("div",{className:"subheader-calendarmodal-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-ysm",children:"Fecha de creacion:"}),Object(qe.jsx)("div",{className:"fechafin-subheader-ysm",children:vt()(f).format("DD-MM-yy")})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-ysm",dangerouslySetInnerHTML:{__html:h}}),Object(qe.jsx)("div",{className:"footer-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"link-footer-ysm"})})]})]})})},Dc={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};rt.a.setAppElement("#root");var Pc=vt()().minutes(0).seconds(0).add(1,"hours"),Ac=Pc.clone().add(1,"hours"),Tc={titulo:"",descripcion:"",start:Pc.toDate(),end:Ac.toDate()},Rc=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.ui})).modalOpen,a=Object(r.c)((function(e){return e.events})),s=(a.events,a.activeEvents),n=Object(c.useState)(Pc.toDate()),i=Object(o.a)(n,2),l=(i[0],i[1],Object(c.useState)(Ac.toDate())),d=Object(o.a)(l,2),u=(d[0],d[1],Object(c.useState)(Tc)),j=Object(o.a)(u,2),b=j[0],m=j[1],h=b.descripcion,O=b.titulo,f=b.start,p=b.end;Object(c.useEffect)((function(){m(s||Tc)}),[s,m]);return Object(qe.jsxs)(rt.a,{isOpen:t,onRequestClose:function(){e(lt()),e(Dt()),m(Tc)},style:Dc,closeTimeoutMS:200,className:"modal modal-calendarmodal-ysm",overlayClassName:"modal-fondo",children:[Object(qe.jsx)("div",{className:"header-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"titulo-calendarmodal-ysm",children:O})}),Object(qe.jsxs)("div",{className:"subheader-calendarmodal-ysm",children:[Object(qe.jsx)("div",{className:"fechainicio-subheader-ysm",children:vt()(f).format("DD-MM-yy")}),Object(qe.jsx)("div",{className:"fechafin-subheader-ysm",children:vt()(p).format("DD-MM-yy")})]}),Object(qe.jsx)("div",{className:"body-calendarmodal-ysm",children:h}),Object(qe.jsx)("div",{className:"footer-calendarmodal-ysm",children:Object(qe.jsx)("div",{className:"link-footer-ysm"})})]})};Object(Cc.createTheme)("solarized",{text:{primary:"#ffffff",secondary:"#ffffff"},background:{default:"#4a484d"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"#073642"},action:{button:"rgba(0,0,0,.54)",hover:"rgba(0,0,0,.08)",disabled:"rgba(0,0,0,.12)"}});var Yc=function(){var e=Object(r.b)();Object(c.useEffect)((function(){e(Rt())}),[e]);var t=Object(r.c)((function(e){return e.events})).events;return Object(qe.jsx)("div",{className:"dashboard__content-resume-right",children:Object(qe.jsxs)("div",{className:"dashboard__content-resume-right-list",children:[Object(qe.jsx)(kc.a,{title:"Eventos",columns:[{name:"Titulo",selector:"titulo"},{name:"Descripcion",selector:"descripcion"}],data:t,theme:"solarized",pagination:"true",paginationPerPage:3,onRowClicked:function(t){e(Mt(t)),e(it())}}),Object(qe.jsx)(Rc,{})]})})},Fc=function(){return Object(qe.jsx)("div",{className:"main__home",children:Object(qe.jsxs)("div",{className:"dashboard__content",children:[Object(qe.jsx)(gc,{}),Object(qe.jsx)(_c,{}),Object(qe.jsxs)("div",{className:"dashboard__content-resume",children:[Object(qe.jsx)(Mc,{}),Object(qe.jsx)(Yc,{})]})]})})},Ic=function(){return Object(qe.jsxs)("div",{children:[Object(qe.jsx)(Ca,{}),Object(qe.jsxs)("div",{className:"main__content",children:[Object(qe.jsx)(_a,{}),Object(qe.jsxs)(Ve.d,{children:[Object(qe.jsx)(Ve.b,{exact:!0,path:"/",component:Jt}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/perfil",component:ca}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/usuarios",component:ta}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/MantenedorUsuario2",component:nc}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/eventos",component:bc}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/calendario",component:Ra}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/configuracion",component:aa}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/tareas",component:Na}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/calendario",component:Ra}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/chat",component:Za}),Object(qe.jsx)(Ve.b,{exact:!0,path:"/dashboard",component:Fc}),Object(qe.jsx)(Ve.a,{to:"/"})]})]})]})},Lc=a(149),Uc=a(2),Jc=a.n(Uc),qc=function(e){var t=e.isAuthenticated,a=e.component,c=Object(Lc.a)(e,["isAuthenticated","component"]);return Object(qe.jsx)(Ve.b,Object(Ze.a)(Object(Ze.a)({},c),{},{component:function(e){return t?Object(qe.jsx)(a,Object(Ze.a)({},e)):Object(qe.jsx)(Ve.a,{to:"/login"})}}))};qc.protoTypes={isAuthenticated:Jc.a.bool.isRequired,component:Jc.a.func.isRequired};var zc=function(e){var t=e.isAuthenticated,a=e.component,c=Object(Lc.a)(e,["isAuthenticated","component"]);return Object(qe.jsx)(Ve.b,Object(Ze.a)(Object(Ze.a)({},c),{},{component:function(e){return t?Object(qe.jsx)(Ve.a,{to:"/"}):Object(qe.jsx)(a,Object(Ze.a)({},e))}}))};zc.protoTypes={isAuthenticated:Jc.a.bool.isRequired,component:Jc.a.func.isRequired};var Hc=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),a=t.checking,s=t.uid;return Object(c.useEffect)((function(){e(function(){var e=Object(j.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/renew");case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,console.log(c),c.ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(We({uid:c.uid,name:c.name,email:c.email,segundoNombre:c.segundoNombre,apellidoPaterno:c.apellidoPaterno,area:c.area,fono:c.fono,nacimiento:c.nacimiento,ingreso:c.ingreso,rol:c.rol,cargo:c.cargo,empresa:c.empresa,permisos:c.permisos,rut:c.rut,imgusuario:c.imgusuario}))):t(Be());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),a?Object(qe.jsx)("h5",{children:"Espere..."}):Object(qe.jsx)(Ge.a,{children:Object(qe.jsx)("div",{children:Object(qe.jsxs)(Ve.d,{children:[Object(qe.jsx)(zc,{exact:!0,path:"/login",component:ct,isAuthenticated:!!s}),Object(qe.jsx)(zc,{exact:!0,path:"/getPassword",component:Qe}),Object(qe.jsx)(zc,{exact:!0,path:"/getPassword2",component:tt}),Object(qe.jsx)(qc,{path:"/",component:Ic,isAuthenticated:!!s})]})})})},Gc=a(96),Vc=a(325),Bc={checking:!0,logged:!1},Wc={posts:[],activePost:null},Kc={reaccion:[]},Xc={tareas:[],activeTareas:null,tareasImage:[],comentarios:[]},Zc={modalOpen:!1},$c={users:[],activeUser:null},Qc={notificacion:[]},es={events:[],activeEvents:null},ts={infoChat:!1},as={birthday:[],message:[]},cs={chats:[],chatActivo:null,messages:[],miembros:[],conexion:null,messageimg:[],messagevideo:[],memberView:[],miembrosNOChat:[]},ss={dashboard:[],usuariosonline:[],usuariosoffline:[],publicaionessemanales:[],eventossemanales:[],conexionesdiarias:[]},ns=Object(Gc.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Ze.a)(Object(Ze.a)({},e),{},{modalOpen:!0});case v:return Object(Ze.a)(Object(Ze.a)({},e),{},{modalOpen:!1});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(Ze.a)(Object(Ze.a)({},e),{},{activePost:t.payload});case g:return Object(Ze.a)(Object(Ze.a)({},e),{},{posts:[t.payload].concat(Object(pa.a)(e.posts))});case N:return Object(Ze.a)(Object(Ze.a)({},e),{},{activePost:null});case _:return Object(Ze.a)(Object(Ze.a)({},e),{},{posts:e.posts.map((function(e){return e.id===t.payload.id?t.payload:e}))});case C:return Object(Ze.a)(Object(Ze.a)({},e),{},{activePost:null});case k:return Object(Ze.a)(Object(Ze.a)({},e),{},{posts:Object(pa.a)(t.payload)});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(Ze.a)(Object(Ze.a)({},e),{},{checking:!1,logged:!0},t.payload);case w:return Object(Ze.a)(Object(Ze.a)({},e),{},{checking:!1});case E:return{checking:!1};default:return e}},reaccion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(Ze.a)(Object(Ze.a)({},e),{},{reaccion:Object(pa.a)(t.payload)});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeUser:t.payload});case P:return Object(Ze.a)(Object(Ze.a)({},e),{},{users:[].concat(Object(pa.a)(e.users),[t.payload])});case T:return Object(Ze.a)(Object(Ze.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.id?t.payload:e}))});case R:return Object(Ze.a)(Object(Ze.a)({},e),{},{users:e.users.filter((function(t){return t.id!==e.activeUser.id})),activeUser:null});case Y:return Object(Ze.a)(Object(Ze.a)({},e),{},{users:Object(pa.a)(t.payload)});case A:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeUser:null});default:return e}},tareas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareas:[].concat(Object(pa.a)(e.tareas),[t.payload])});case L:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareas:e.tareas.map((function(e){return e.id===t.payload.id?t.payload:e}))});case U:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeTareas:t.payload});case J:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeTareas:null});case q:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareasImage:t.payload});case z:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareasImage:[].concat(Object(pa.a)(e.tareasImage),[t.payload])});case H:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareasImage:e.tareasImage.filter((function(t){return t.id!==e.activeTareas.id})),activeEvents:null});case G:return Object(Ze.a)(Object(Ze.a)({},e),{},{comentarios:[].concat(Object(pa.a)(e.comentarios),[t.payload])});case V:return Object(Ze.a)(Object(Ze.a)({},e),{},{comentarios:Object(pa.a)(t.payload)});case F:return Object(Ze.a)(Object(Ze.a)({},e),{},{tareas:Object(pa.a)(t.payload)});default:return e}},Notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(Ze.a)(Object(Ze.a)({},e),{},{notificacion:Object(pa.a)(t.payload)});default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeEvents:t.payload});case K:return Object(Ze.a)(Object(Ze.a)({},e),{},{events:[].concat(Object(pa.a)(e.events),[t.payload])});case Z:return Object(Ze.a)(Object(Ze.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case $:return Object(Ze.a)(Object(Ze.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.activeEvents.id})),activeEvents:null});case Q:return Object(Ze.a)(Object(Ze.a)({},e),{},{events:Object(pa.a)(t.payload)});case X:return Object(Ze.a)(Object(Ze.a)({},e),{},{activeEvents:null});default:return e}},infoChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ts,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(Ze.a)(Object(Ze.a)({},e),{},{infoChat:e});case te:return Object(Ze.a)(Object(Ze.a)({},e),{},{infoChat:!1});default:return e}},birthday:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:as,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(Ze.a)(Object(Ze.a)({},e),{},{birthday:[].concat(Object(pa.a)(e.birthday),[t.payload])});case ae:return Object(Ze.a)(Object(Ze.a)({},e),{},{birthday:Object(pa.a)(t.payload)});case se:return Object(Ze.a)(Object(Ze.a)({},e),{},{message:Object(pa.a)(t.payload)});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(Ze.a)(Object(Ze.a)({},e),{},{chats:[t.payload].concat(Object(pa.a)(e.chats))});case oe:return e.chatActivo===t.payload?e:Object(Ze.a)(Object(Ze.a)({},e),{},{chatActivo:t.payload,messages:[]});case re:return Object(Ze.a)(Object(Ze.a)({},e),{},{chats:Object(pa.a)(t.payload)});case ie:return e.chatActivo&&e.chatActivo.id===t.payload.to?Object(Ze.a)(Object(Ze.a)({},e),{},{messages:[].concat(Object(pa.a)(e.messages),[t.payload])}):e;case le:return Object(Ze.a)(Object(Ze.a)({},e),{},{messages:Object(pa.a)(t.payload)});case de:return Object(Ze.a)(Object(Ze.a)({},e),{},{miembros:Object(pa.a)(t.payload)});case ue:return Object(Ze.a)(Object(Ze.a)({},e),{},{conexion:t.payload});case je:return Object(Ze.a)(Object(Ze.a)({},e),{},{messageimg:t.payload});case be:return Object(Ze.a)(Object(Ze.a)({},e),{},{messagevideo:t.payload});case me:return Object(Ze.a)(Object(Ze.a)({},e),{},{memberView:t.payload});case he:return Object(Ze.a)(Object(Ze.a)({},e),{},{miembrosNOChat:t.payload});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ss,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return Object(Ze.a)(Object(Ze.a)({},e),{},{dashboard:t.payload});case fe:return Object(Ze.a)(Object(Ze.a)({},e),{},{usuariosonline:t.payload});case pe:return Object(Ze.a)(Object(Ze.a)({},e),{},{usuariosoffline:t.payload});case xe:return Object(Ze.a)(Object(Ze.a)({},e),{},{publicaionessemanales:t.payload});case ve:return Object(Ze.a)(Object(Ze.a)({},e),{},{eventossemanales:t.payload});case ye:return Object(Ze.a)(Object(Ze.a)({},e),{},{conexionesdiarias:t.payload});default:return e}}}),rs="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Gc.c,os=Object(Gc.d)(ns,rs(Object(Gc.a)(Vc.a))),is=function(){return Object(qe.jsx)(r.a,{store:os,children:Object(qe.jsx)(He,{children:Object(qe.jsx)(Hc,{})})})};a(701);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://mern-calendar-vict.herokuapp.com/api"})),n.a.render(Object(qe.jsx)(is,{}),document.getElementById("root"))}},[[702,1,2]]]);
//# sourceMappingURL=main.c8e7499b.chunk.js.map